<!doctype html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-title" content="WlanThermo">
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<link rel="apple-touch-icon-precomposed" href="https://raw.githubusercontent.com/WLANThermo-nano/WLANThermo_nano_Logos/master/apple-touch-icon-180x180-precomposed.png" >
	<!-- <link rel="apple-touch-startup-image" href="startupimagename.png" > -->
	<script src="jquery.min.js"></script>
	<script src="language.js"></script>
	<script type="text/javascript">!function(e){function t(e,t,o){var n=this;o=o||{},o.open=n.getElm(o.open),o.openEvent=o.openEvent||"click",o.style=Object(o.style),o.style.display=o.style.display||"block",o.closeOnBlur=o.closeOnBlur||!1,o.template=o.template||'<div data-col="{color}" style="background-color: {color}"></div>',n.elm=n.getElm(e),n.cbs=[],n.isOpen=!0,n.colors=t,n.options=o,n.render(),o.open&&o.open.addEventListener(o.openEvent,function(e){n.isOpen?n.close():n.open()}),n.elm.addEventListener("click",function(e){var t=e.target.getAttribute("data-col");t&&(n.set(t),n.close())}),o.closeOnBlur&&window.addEventListener("click",function(e){e.target!=o.open&&e.target!=n.elm&&n.isOpen&&n.close()}),o.autoclose!==!1&&n.close()}t.prototype.getElm=function(e){return"string"==typeof e?document.querySelector(e):e},t.prototype.render=function(){var e=this,t="";e.colors.forEach(function(o){t+=e.options.template.replace(/\{color\}/g,o)}),e.elm.innerHTML=t},t.prototype.close=function(){this.elm.style.display="none",this.isOpen=!1},t.prototype.open=function(){this.elm.style.display=this.options.style.display,this.isOpen=!0},t.prototype.colorChosen=function(e){this.cbs.push(e)},t.prototype.set=function(e,t){var o=this;o.color=e,t!==!1&&o.cbs.forEach(function(t){t.call(o,e)})},e.Piklor=t}(this);</script>
	<link rel="stylesheet" href="icon-font.css">
	<link rel="stylesheet" href="pure.css">
	<title>WLANThermo - Nano</title>
	 <style>
		/*	----------------------------------------------------------------------------------- */

table {
	width: 100%;
}

.row-Check {
	width: 24px;
	text-align: left;
	padding-left: 2px;
}

.row-SSID {
	text-align: left;
	padding-left: 4px;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

.row-Enc, .row-RSSI {
	width: 24px;
	text-align: right;
	padding-right: 4px;
}

.row-link {
	width: 30px;
	text-align: right;
	padding-right: 2px;
}

.wlantable tr {
	cursor: pointer;
}

.wlantable tr:hover {
	background-color: #333;
}

<!-- .pure-table, -->
<!-- table { -->
	<!-- border-collapse: collapse; -->
	<!-- border-spacing: 0 -->
<!-- } -->

.table_nav tr td {
	width: 50%;
	padding-top: 0.375rem;
	padding-bottom: 0.375rem;
	color: #0078e7;
	text-align: center;
	font-size: 1.2em;
	border-bottom: 4px solid #2f2f2f
}

.table_nav tr td:first-child {
	text-align: left;
	padding-left: 0.5rem;
}

.table_nav tr td:last-child {
	text-align: right;
	padding-right: 0.5rem;
}

.table_nav tr td span {
	cursor: pointer;
}

.table33 tr td {
	width: 33%;
	padding-left: 0.25em;
	padding-right: 0.25em;
}

.table50 tr td {
	width: 50%;
	padding-left: 0.25em;
	padding-right: 0.25em;
}

.table33 tr td:last-child,
.table50 tr td:last-child {
	padding-right: 0;
	padding-left: 0.25em;
}

.table33 tr td:first-child,
.table50 tr td:first-child {
	padding-left: 0;
	padding-right: 0.25em;
}

.historyTable table,
th,
td {
	border-collapse: collapse;
}

table.historyTable tr td:last-child {
	text-align: right;
	padding-right: 0.5em;
}

thead {
	text-align: left;
}

table.historyTable tr {
	background: #4a4a4a;
}

table.historyTable tr:nth-child(odd) {
	background: #424242;
}

table.historyTable tr:hover {
	background-color: #333;
}


/*	----------------------------------------------------------------------------------- */



@media screen and (min-width:35.5em) {
	.pure-u-sm-1,
	.pure-u-sm-1-1,
	.pure-u-sm-1-2,
	.pure-u-sm-1-3,
	.pure-u-sm-1-4 {
		display: inline-block;
		zoom: 1;
		letter-spacing: normal;
		word-spacing: normal;
		vertical-align: top;
		text-rendering: auto
	}
	.pure-u-sm-1-4 {
		width: 25%
	}
	.pure-u-sm-1-3 {
		width: 33.3333%
	}
	.pure-u-sm-1-2 {
		width: 50%
	}
	.pure-u-sm-1,
	.pure-u-sm-1-1 {
		width: 100%
	}
}

@media screen and (min-width:48em) {
	.pure-u-md-1,
	.pure-u-md-1-1,
	.pure-u-md-1-2,
	.pure-u-md-1-3,
	.pure-u-md-1-4 {
		display: inline-block;
		zoom: 1;
		letter-spacing: normal;
		word-spacing: normal;
		vertical-align: top;
		text-rendering: auto
	}
	.pure-u-md-1-4 {
		width: 25%
	}
	.pure-u-md-1-3 {
		width: 33.3333%
	}
	.pure-u-md-1-2 {
		width: 50%
	}
	.pure-u-md-1,
	.pure-u-md-1-1 {
		width: 100%
	}
}

@media screen and (min-width:64em) {
	.pure-u-lg-1,
	.pure-u-lg-1-1,
	.pure-u-lg-1-2,
	.pure-u-lg-1-3,
	.pure-u-lg-1-4 {
		display: inline-block;
		zoom: 1;
		letter-spacing: normal;
		word-spacing: normal;
		vertical-align: top;
		text-rendering: auto
	}
	.pure-u-lg-1-4 {
		width: 25%
	}
	.pure-u-lg-1-3 {
		width: 33.3333%
	}
	.pure-u-lg-1-2 {
		width: 50%
	}
	.pure-u-lg-1,
	.pure-u-lg-1-1 {
		width: 100%
	}
}

@media screen and (min-width:80em) {
	.pure-u-xl-1,
	.pure-u-xl-1-1,
	.pure-u-xl-1-2,
	.pure-u-xl-1-3,
	.pure-u-xl-1-4 {
		display: inline-block;
		zoom: 1;
		letter-spacing: normal;
		word-spacing: normal;
		vertical-align: top;
		text-rendering: auto;
	}
	.pure-u-xl-1-4 {
		width: 25%
	}
	.pure-u-xl-1-3 {
		width: 33.3333%
	}
	.pure-u-xl-1-2 {
		width: 50%
	}
	.pure-u-xl-1,
	.pure-u-xl-1-1 {
		width: 100%
	}
}

.headmenu {
	background-color: #333;
	border-bottom: 4px solid #2F2F2F;
	color: #ccc;
	height: 44px;
}

#thermoname {
	padding: 14px 5px;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
	float: left;
}

.float-right {
	float: right;
}

.float-left {
	float: left;
}

.wifi,
.notification,
.cloud {
	text-align: center;
	padding: 14px 2px;
	overflow: hidden;
	float: right;
	border-left: 2px solid #333;
}

.battery {
	text-align: center;
	padding: 14px 5px;
	float: right;
}

.channel {
	background-color: #4a4a4a;
	border-left: 10px solid #FFF;
	color: #ccc;
	padding: 5px 10px;
	margin: 5px;
	position: relative;
}

.channel_conf,
.wlan_conf {
	background-color: #4a4a4a;
	color: #ccc;
	padding: 0.25rem 0.5rem;
	margin: 0.25rem;
	position: relative;
}

.chtitle {
	font-size: 1em;
	text-align: left;
}

.chnumber {
	position: absolute;
	right: .7em;
	top: .3em;
}

.temp {
	font-size: 2em;
	padding-top: .4em;
	text-align: right;
	float: left;
	width: 75%
}

.temp_input {
	width: 8.2em;
}

.tempadjust {
	text-align: left;
	float: left;
	width: 25%;
}

.tempmin {
	font-size: .8em;
	float: left;
}

.tempmax {
	font-size: .8em;
	clear: both;
}

.clear {
	clear: both;
}

body {
	color: #777;
	background-color: #333;
}

#layout,
#menu,
.menu-link {
	-webkit-transition: all .2s ease-out;
	-moz-transition: all .2s ease-out;
	-ms-transition: all .2s ease-out;
	-o-transition: all .2s ease-out;
	transition: all .2s ease-out;
}

#layout {
	position: relative;
	left: 0;
	padding-left: 0;
}

#layout.active #menu {
	left: 150px;
	width: 150px;
}

#layout.active .menu-link {
	left: 150px;
}

.content {
	margin: 0 auto;
	max-width: 1024px;
	margin-bottom: 50px;
	line-height: 1.6em;
}

.header {
	margin: 0;
	color: #FFF;
	text-align: center;
	border-bottom: 1px solid #555;
	display: none;
}

.header h1 {
	margin: .2em 0;
	font-size: 3em;
	font-weight: 300;
}

.header h2 {
	font-weight: 300;
	color: #ccc;
	padding: 0;
	margin-top: 0;
}

.headtitle {
	padding: 0;
	margin: 5px 35px 0 5px;
}

.footer_buttons {
	margin: 5px;
}

.content-subhead {
	margin: 50px 0 20px;
	font-weight: 300;
	color: #888;
}

.checkbox_title {
	margin-left: 45px;
}

#menu {
	margin-left: -150px;
	width: 150px;
	position: fixed;
	top: 0;
	left: 0;
	bottom: 0;
	z-index: 1000;
	background: #191818;
	overflow-y: auto;
	-webkit-overflow-scrolling: touch;
}

#menu a {
	color: #999;
	border: none;
	padding: .6em 0 .6em .6em;
}

#menu .pure-menu,
#menu .pure-menu ul {
	border: none;
	background: transparent;
}

#menu .pure-menu li a:hover,
#menu .pure-menu li a:focus {
	background: #333;
}

#menu .pure-menu-selected a {
	color: #fff;
}

#menu .pure-menu-heading {
	font-size: 110%;
	color: #fff;
	margin: 0;
}

.umenu {
	list-style-type: disc;
	margin: 4px;
}

.umenu a {
	padding: 4px !important;
	text-decoration: none;
}

.menu-link {
	position: absolut;
	display: block;
	top: 0;
	left: 0;
	background: #333;
	font-size: 10px;
	z-index: 10;
	width: 2em;
	height: auto;
	padding: 2.1em 1.6em;
	float: left;
}

.menu-link:hover,
.menu-link:focus {
	background: #333;
}

.menu-link span {
	position: relative;
	display: block;
}

.menu-link span,
.menu-link span:before,
.menu-link span:after {
	background-color: #fff;
	width: 100%;
	height: .2em;
}

.menu-link span:before,
.menu-link span:after {
	position: absolute;
	margin-top: -.6em;
	content: " ";
}

.menu-link span:after {
	margin-top: .6em;
}

@media (min-width: 48em) {
	.header,
	.content {}
	#layout {
		padding-left: 150px;
		left: 0;
	}
	#menu {
		left: 150px;
	}
	.menu-link {
		position: fixed;
		left: 150px;
		display: none;
	}
	#layout.active .menu-link {
		left: 150px;
	}
}

.channel:hover,
.notification:hover,
.wifi:hover,
.battery:hover,
.cloud:hover {
	cursor: pointer;
}

@media (max-width: 48em) {
	#layout.active {
		position: relative;
		left: 150px;
	}
}


/*
				`.menu-link` represents the responsive menu toggle that shows/hides on
				small screens.
				*/

.menu-link {
	position: absolut;
	display: block;
	/* show this only on small screens */
	top: 0;
	left: 0;
	/* "#menu width" */
	background: #333;
	font-size: 10px;
	/* change this value to increase/decrease button size */
	z-index: 10;
	width: 2em;
	height: auto;
	padding: 2.1em 1.6em;
	float: left;
}

.menu-link:hover,
.menu-link:focus {
	background: #333;
}

.menu-link span {
	position: relative;
	display: block;
}

.menu-link span,
.menu-link span:before,
.menu-link span:after {
	background-color: #fff;
	width: 100%;
	height: 0.2em;
}

.menu-link span:before,
.menu-link span:after {
	position: absolute;
	margin-top: -0.6em;
	content: " ";
}

.menu-link span:after {
	margin-top: 0.6em;
}

select option {
	background-color: #4A4A4A;
}

select:disabled {
	opacity: 0.4;
}

input,
select,
textarea * {
	box-sizing: border-box;
}

body::after,
body::before,
input::after,
input::before,
select::after,
select::before,
textarea::after,
textarea::before,
body *::after,
body *::before {
	box-sizing: border-box;
}

h1 {
	font-size: 2rem;
	text-align: center;
	margin: 0 0 2em;
}

.button-container {
	text-align: center;
}

fieldset {
	margin: 0 0 3rem;
	padding: 0;
	border: none;
}

.form-radio,
.form-group {
	position: relative;
	margin-top: 1.25rem;
	margin-bottom: 1.25rem;
}

.form-inline>.form-group,
.form-inline>.btn {
	display: inline-block;
	margin-bottom: 0;
}

.form-help {
	margin-top: 0.125rem;
	margin-left: 0.125rem;
	color: #b3b3b3;
	font-size: 0.8rem;
}

.checkbox .form-help,
.form-radio .form-help,
.form-group .form-help {
	position: absolute;
	width: 100%;
}

.checkbox .form-help {
	position: relative;
	margin-bottom: 1rem;
}

.form-radio .form-help {
	padding-top: 0.25rem;
	margin-top: -1rem;
}

.form-group input {
	height: 1.9rem;
}

.form-group textarea {
	resize: none;
}

select {
	-webkit-appearance: none;
	-moz-appearance: none;
	appearance: none;
}

.form-group select {
	width: 100%;
	font-size: 1rem;
	height: 1.6rem;
	padding: 0.125rem 0.125rem 0.0625rem;
	background: none;
	border: none;
	line-height: 1.6;
	box-shadow: none;
}

.form-group .control-label {
	position: absolute;
	top: 0.25rem;
	pointer-events: none;
	padding-left: 0.125rem;
	z-index: 1;
	color: #b3b3b3;
	font-size: 1rem;
	font-weight: normal;
	-webkit-transition: all 0.28s ease;
	transition: all 0.28s ease;
}

.form-group .bar {
	position: relative;
	border-bottom: 0.0625rem solid #999;
	display: block;
}

.form-group .bar::before {
	content: '';
	height: 0.125rem;
	width: 0;
	left: 50%;
	bottom: -0.0625rem;
	position: absolute;
	background: #337ab7;
	-webkit-transition: left 0.28s ease, width 0.28s ease;
	transition: left 0.28s ease, width 0.28s ease;
	z-index: 2;
}

.form-group input,
.form-group textarea {
	display: block;
	background: none;
	padding: 0.375rem 0.125rem 0.0625rem;
	font-size: 1rem;
	border-width: 0;
	border-color: transparent;
	line-height: 1.9;
	width: 100%;
	color: transparent;
	-webkit-transition: all 0.28s ease;
	transition: all 0.28s ease;
	box-shadow: none;
}

.form-group input[type="file"] {
	line-height: 1;
}

.form-group input[type="file"]~.bar {
	display: none;
}

.form-group input[readonly],
.form-group input[readonly="readonly"],
.form-group select,
.form-group input:focus,
.form-group input:valid,
.form-group input.form-file,
.form-group input.has-value,
.form-group textarea:focus,
.form-group textarea:valid,
.form-group textarea.form-file,
.form-group textarea.has-value {
	color: #fff;
}

.form-group input[readonly]~.control-label,
.form-group input[readonly="readonly"]~.control-label,
.form-group select~.control-label,
.form-group input:focus~.control-label,
.form-group input:valid~.control-label,
.form-group input.form-file~.control-label,
.form-group input.has-value~.control-label,
.form-group textarea:focus~.control-label,
.form-group textarea:valid~.control-label,
.form-group textarea.form-file~.control-label,
.form-group textarea.has-value~.control-label {
	font-size: 0.8rem;
	color: gray;
	top: -1rem;
	left: 0;
}

.form-group select:focus,
.form-group input:focus,
.form-group textarea:focus {
	outline: none;
}

.form-group select:focus~.control-label,
.form-group input:focus~.control-label,
.form-group textarea:focus~.control-label {
	color: #337ab7;
}

.form-group select:focus~.bar::before,
.form-group input:focus~.bar::before,
.form-group textarea:focus~.bar::before {
	width: 100%;
	left: 0;
}


/* unvisited link */

a:link,
a:visited,
a:active {
	color: #fff;
	text-decoration: none;
}


/* mouse over link */

a:hover {
	color: #337ab7;
	text-decoration: none;
}

.checkbox label,
.form-radio label {
	position: relative;
	cursor: pointer;
	padding-left: 2rem;
	text-align: left;
	color: #fff;
	display: block;
}

.checkbox input,
.form-radio input {
	width: auto;
	opacity: 0.00000001;
	position: absolute;
	left: 0;
}

.radio {
	margin-bottom: 1rem;
}

.radio .helper {
	position: absolute;
	top: -0.25rem;
	left: -0.25rem;
	cursor: pointer;
	display: block;
	font-size: 1rem;
	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
	color: #999;
}

.radio .helper::before,
.radio .helper::after {
	content: '';
	position: absolute;
	left: 0;
	top: 0;
	margin: 0.25rem;
	width: 1rem;
	height: 1rem;
	-webkit-transition: -webkit-transform 0.28s ease;
	transition: -webkit-transform 0.28s ease;
	transition: transform 0.28s ease;
	transition: transform 0.28s ease, -webkit-transform 0.28s ease;
	border-radius: 50%;
	border: 0.125rem solid currentColor;
}

.radio .helper::after {
	-webkit-transform: scale(0);
	transform: scale(0);
	background-color: #fcfcfc;
	border-color: #fcfcfc;
}

.radio label:hover .helper {
	color: #fcfcfc;
}

.radio input:checked~.helper::after {
	-webkit-transform: scale(0.5);
	transform: scale(0.5);
}

.radio input:checked~.helper::before {
	color: #fcfcfc;
}

.checkbox {
	margin-top: 1.25rem;
	margin-bottom: 1rem;
}

.checkbox .helper {
	color: #999;
	position: absolute;
	top: 0;
	left: 0;
	width: 1rem;
	height: 1rem;
	z-index: 0;
	border: 0.125rem solid currentColor;
	border-radius: 0.0625rem;
	-webkit-transition: border-color 0.28s ease;
	transition: border-color 0.28s ease;
}

.checkbox .helper::before,
.checkbox .helper::after {
	position: absolute;
	height: 0;
	width: 0.2rem;
	background-color: #fcfcfc;
	display: block;
	-webkit-transform-origin: left top;
	transform-origin: left top;
	border-radius: 0.25rem;
	content: '';
	-webkit-transition: opacity 0.28s ease, height 0s linear 0.28s;
	transition: opacity 0.28s ease, height 0s linear 0.28s;
	opacity: 0;
}

.checkbox .helper::before {
	top: 0.65rem;
	left: 0.38rem;
	-webkit-transform: rotate(-135deg);
	transform: rotate(-135deg);
	box-shadow: 0 0 0 0.0625rem #fff;
}

.checkbox .helper::after {
	top: 0.3rem;
	left: 0;
	-webkit-transform: rotate(-45deg);
	transform: rotate(-45deg);
}

.checkbox label:hover .helper {
	color: #fcfcfc;
}

.checkbox input:checked~.helper {
	color: #fcfcfc;
}

.checkbox input:checked~.helper::after,
.checkbox input:checked~.helper::before {
	opacity: 1;
	-webkit-transition: height 0.28s ease;
	transition: height 0.28s ease;
}

.checkbox input:checked~.helper::after {
	height: 0.5rem;
}

.checkbox input:checked~.helper::before {
	height: 1.2rem;
	-webkit-transition-delay: 0.28s;
	transition-delay: 0.28s;
}

.radio+.radio,
.checkbox+.checkbox {
	margin-top: 1rem;
}

.has-error .legend.legend,
.has-error.form-group .control-label.control-label {
	color: #d9534f;
}

.has-error.form-group .form-help,
.has-error.form-group .helper,
.has-error.checkbox .form-help,
.has-error.checkbox .helper,
.has-error.radio .form-help,
.has-error.radio .helper,
.has-error.form-radio .form-help,
.has-error.form-radio .helper {
	color: #d9534f;
}

.has-error .bar::before {
	background: #d9534f;
	left: 0;
	width: 100%;
}

.button {
	position: relative;
	background: currentColor;
	border: 1px solid currentColor;
	font-size: 1.1rem;
	color: #4f93ce;
	margin: 3rem 0;
	padding: 0.75rem 3rem;
	cursor: pointer;
	-webkit-transition: background-color 0.28s ease, color 0.28s ease, box-shadow 0.28s ease;
	transition: background-color 0.28s ease, color 0.28s ease, box-shadow 0.28s ease;
	overflow: hidden;
	box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 1px 5px 0 rgba(0, 0, 0, 0.12);
}

.button span {
	color: #fff;
	position: relative;
	z-index: 1;
}

.button::before {
	content: '';
	position: absolute;
	background: #071017;
	border: 50vh solid #1d4567;
	width: 30vh;
	height: 30vh;
	border-radius: 50%;
	display: block;
	top: 50%;
	left: 50%;
	z-index: 0;
	opacity: 1;
	-webkit-transform: translate(-50%, -50%) scale(0);
	transform: translate(-50%, -50%) scale(0);
}

.button:hover {
	color: #fcfcfc;
	box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12), 0 3px 5px -1px rgba(0, 0, 0, 0.2);
}

.button:active::before,
.button:focus::before {
	-webkit-transition: opacity 0.28s ease 0.364s, -webkit-transform 1.12s ease;
	transition: opacity 0.28s ease 0.364s, -webkit-transform 1.12s ease;
	transition: transform 1.12s ease, opacity 0.28s ease 0.364s;
	transition: transform 1.12s ease, opacity 0.28s ease 0.364s, -webkit-transform 1.12s ease;
	-webkit-transform: translate(-50%, -50%) scale(1);
	transform: translate(-50%, -50%) scale(1);
	opacity: 0;
}

.button:focus {
	outline: none;
}


/* -- Responsive Styles (Media Queries) ------------------------------------- */

.cover_active {
	position: fixed;
	top: 0;
	left: 0;
	background: rgba(0, 0, 0, 0.6);
	z-index: 5;
	width: 100%;
	height: 100%;
	display: none;
	display: block;
	opacity: 2;
}

.spinner {
	position: absolute;
	top: 50%;
	left: 50%;
	height: 28px;
	width: 28px;
	margin-left: -14px;
	margin-top: -14px;
	animation: rotate 0.8s infinite linear;
	border: 8px solid #fff;
	border-right-color: transparent;
	border-radius: 50%;
	-webkit-transition-delay: 1s;
	/* Safari */
	transition-delay: 1s;
}

@keyframes rotate {
	0% {
		transform: rotate(0deg);
	}
	100% {
		transform: rotate(360deg);
	}
}

.icon-form {
	position: absolute;
	padding-left: 10px;
	top: 0.375rem;
	right: 0.25rem;
}

.icon-input {
	position: absolute;
	padding-left: 10px;
	top: 0.625rem;
	right: 0.25rem;
}

.helpBox {
	display: none;
	/* Hidden by default */
	position: fixed;
	/* Stay in place */
	z-index: 1001;
	/* Sit on top */
	padding-top: 100px;
	/* Location of the box */
	left: 0;
	top: 0;
	width: 100%;
	/* Full width */
	height: 100%;
	/* Full height */
	overflow: auto;
	/* Enable scroll if needed */
	background-color: rgb(0, 0, 0);
	/* Fallback color */
	background-color: rgba(0, 0, 0, 0.4);
	/* Black w/ opacity */
}


/* helpBox Content */

.helpBox-content {
	position: relative;
	background-color: #fefefe;
	margin: auto;
	padding: 0;
	border: 1px solid #888;
	width: 80%;
	box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
	-webkit-animation-name: animatetop;
	-webkit-animation-duration: 0.4s;
	animation-name: animatetop;
	animation-duration: 0.4s
}


/* Add Animation */

@-webkit-keyframes animatetop {
	from {
		top: -300px;
		opacity: 0
	}
	to {
		top: 0;
		opacity: 1
	}
}

@keyframes animatetop {
	from {
		top: -300px;
		opacity: 0
	}
	to {
		top: 0;
		opacity: 1
	}
}


/* The Close Button */

.close {
	color: white;
	float: right;
	font-size: 28px;
	font-weight: bold;
}

.close:hover,
.close:focus {
	color: #000;
	text-decoration: none;
	cursor: pointer;
}

.helpBox-header {
	padding: 2px 16px;
	background-color: #5cb85c;
	color: white;
}

.helpBox-body {
	padding: 2px 16px;
}

.helpBox-footer {
	padding: 2px 16px;
	background-color: #5cb85c;
	color: white;
}

.text-align-right {
	text-align: right;
	margin-top: 4px;
}

.text-align-left {
	text-align: left;
}

#menuVersion {
	margin: -12px 10px 0 0;
	padding: 0;
	text-align: right;
	font-size: 0.75em;
}


/* color-picker */

.btn-default {
	border-radius: 0;
	background: #4A4A4A;
	cursor: pointer;
}

.picker-wrapper {
	transition: background-color 0.5s ease;
}


/* picker */

.color-picker {
	background: #4A4A4A;
	padding: 10px;
	border: 1px solid rgba(203, 203, 203, 0.6);
	border-radius: 2px;
}

.color-picker>div {
	width: 40px;
	display: inline-block;
	height: 40px;
	margin: 5px;
	border-radius: 100%;
	opacity: 0.7;
}

.picker-wrapper {
	padding: 0px;
}

.color-picker>div:hover {
	opacity: 1;
}

.color_border {
	border-left: 10px solid #FFF;
}
		<!-- ---- -->
    </style>
</head>
<body>

<div id="layout">
	<div class="headmenu">
		<!-- Menu toggle -->
		<a href="#menu" id="menuLink" class="menu-link">
			<!-- Hamburger icon -->
			<span></span>
		</a>
		<div id="thermoname">N.C.</div>
		<div class="battery" onclick="setshowBatteryWlanIcon();"></div>
		<div class="wifi" onclick="setshowBatteryWlanIcon();">N.C.</div>
		<div class="cloud" onclick="clickCloudIcon();"></div>
		<div class="notification" style="display:none" onclick="update();"><span class="icon-notification icon-yellow"> </span></div>
	</div>
	<div class="clear"></div>
    <div id="menu">
        <div class="pure-menu custom-restricted-width">
			<a class="pure-menu-heading" href="javascript:showIndex()">
			 <img src="WLANThermoLogo.png" alt="WLANThermo" height="58" width="130">
			</a>
			<p id="menuVersion">version</p>
            <ul class="pure-menu-list">
                <li id="menuHome" class="pure-menu-item"><a href="javascript:showIndex()" class="pure-menu-link" data-tag="menuHome">Home</a></li>
				<li id="menuWlan" class="pure-menu-item"><a href="javascript:showWLAN()" class="pure-menu-link" data-tag="menuWlan">WLAN</a></li>
				<li id="menuSystem" class="pure-menu-item"><a href="javascript:showSystem()" class="pure-menu-link" data-tag="menuSystem">System</a></li>
				<li id="menuPitmaster" class="pure-menu-item"><a href="javascript:showPitmaster()" class="pure-menu-link" data-tag="menuPitmaster">Pitmaster</a></li>
				<li id="menuIOT" class="pure-menu-item"><a href="javascript:showIOT()" class="pure-menu-link" data-tag="menuIOT">IoT</a></li>
				<li id="menuHistory" class="pure-menu-item" style="display:none"><a href="javascript:showHistory()" class="pure-menu-link" data-tag="menuHistory">Historie</a></li>
				<li id="menuNotification" class="pure-menu-item"><a href="javascript:showPushNotification()" class="pure-menu-link" data-tag="menuNotification">Benachrichtigung</a></li>
                <li id="menuAbout" class="pure-menu-item"><a href="javascript:showAbout()" class="pure-menu-link" data-tag="menuAbout">Über</a></li>
            </ul>
        </div>
    </div>

    <div id="main">
        <div class="header">
            <h1>WLANThermo</h1>
        </div>
		<!-- ################################################### -->
        <div id="channel_template" style="display:none">
			<div class="pure-u-1-1 pure-u-md-1-2 pure-u-xl-1-4" onclick="showSetChannel(this.dataset.channel)">
				<div class="1-box channel">
					<div class="chtitle"></div>
					<div class="chnumber"></div>
					<div class="tempadjust">
						<div class="tempmax"></div>
						<div class="tempmin"></div>
					</div>
					<div class="temp"></div>
					<div class="clear"></div>
				</div>
			</div>
		</div>
 		<!-- ################################################### -->
        <div id="index" class="content" class="hidden" style="display:none">
            <div id="index_content" class="pure-g channel_index"><!-- Dynamically channel insert --></div>
		</div> 
		<!-- ################################################### -->
		<div id="wlan_config" class="content" style="display:none">
			
			<table class="table_nav" cellpadding="0" cellspacing="0" width="100%" border="0">
				<tr>
					<td>
						<span onclick="showIndex()">
							<span class="icon-arrow_left"></span>
							<span data-tag="back">Zurück</span>
						</span>
					</td>
					<td></td>
				</tr>
			</table>
			
			<div class="float-left text-align-left"><h3 class="headtitle" data-tag="wlanTitle">WLAN-Einstellungen</h3></div>
			<div class="float-right text-align-right"><span onclick="setHelpBox('WLAN Einstellungen',help_wifi)" class="icon-question_sign"></span></div>
			<div style="clear:both;"></div>
			<div class="pure-g">
				<div class="pure-u-1-1 pure-u-lg-1-1">
					<div class="1-box wlan_conf">	
						<div class="checkbox">
						  <label>
							<input id="wlan_active" onclick="wlan_active();" type="checkbox" checked/><i class="helper"></i><span data-tag="wlanActivate">WLAN aktivieren</span>
						  </label>
						</div>
						<hr id="hr_wifi" style="display:none"/>
						<table id="networkconnect" class="wlantable" width="100%">
							<!--Netzwerkliste -->
						</table> 
						<hr />
						 <table width="100%">
							<tr>
								<td align="left"><h3 data-tag="wlanNetwork">Netzwerk wählen...</h3></td>
								<td id="networkrefresh" align="right"></td>
							</tr>
						</table> 		
						<table id="networklist" class="wlantable" width="100%">
								<!--Netzwerkliste -->
						</table>
						<hr />
						<p class="pure-button pure-button-primary" onclick="clearWifi();" data-tag="wlanClear">Netzwerkverbindungsdaten löschen</p>
					</div>
				</div>
			</div>
        </div>
		<!-- ################################################### -->
		<div id="wlan_set" class="content" style="display:none">
			<table class="table_nav" cellpadding="0" cellspacing="0" width="100%" border="0">
				<tr>
				  <td><span onclick="showWLAN()"><span class="icon-arrow_left"></span><span data-tag="back">Zurück</span></span></td>
				  <td><span onclick="setWLAN(document.getElementsByName('ssidInput')[0].value, document.getElementsByName('ssidPasswordInput')[0].value)"><span data-tag="save">Speichern</span><span class="icon-arrow_right"></span></span></td>	  
				</tr>
			</table>
			<h3 class="headtitle" data-tag="wlanConnect">Netzwerk verbinden</h3>
			<div class="pure-g">
				<div class="pure-u-1-1 pure-u-lg-1-1">
					<div class="1-box channel_conf">
						<form>							
							<div class="form-group">
							  <input name="ssidInput" type="text" onkeyup="setssidInput();" maxlength="32" required="required"/>
							  <label class="control-label" for="input"><span data-tag="wlanSSID">SSID</span></label><i class="bar"></i>
							</div>			
							<div class="form-group">
							  <input name="ssidPasswordInput" type="password" maxlength="63" required="required"/>
							  <label class="control-label" for="input"><span data-tag="wlanPwd">Passwort</span></label><i class="bar"></i>
							</div>	
						</form>
					</div>
				</div>
			</div>
        </div>
		<!-- ################################################### -->
		<div id="pitmaster_settings" class="content" style="display:none">
			<table class="table_nav" cellpadding="0" cellspacing="0" width="100%" border="0">
				<tr>
				  <td><span onclick="showIndex()"><span class="icon-arrow_left"></span><span data-tag="back">Zurück</span></span></td>
				  <td><span onclick="setPitmaster();"><span data-tag="save">Speichern</span><span class="icon-arrow_right"></span></span></td>
				</tr>
			</table>
			<div class="float-left text-align-left"><h3 class="headtitle" data-tag="pitTitle">Pitmaster-Einstellungen</h3></div>
			<div class="float-right text-align-right"><span onclick="setHelpBox('Pitmaster Einstellungen',help_pitmaster)" class="icon-question_sign"></span></div>
			<div style="clear:both;"></div>
			<div class="pure-g" id="pitmaster_id0">
				<div class="pure-u-1-1 pure-u-lg-1-1">
					<div class="1-box channel_conf">
						<form>
              <div class="form-group">
								<input value="Pitmaster 1" readonly>
								<label class="control-label" for="select"><span data-tag="pitID">Pitmaster</span></label><i class="bar"></i>
							</div>
							<div class="form-group">
								<select id="pitmaster_typ0" onchange="changePitmasterTyp(0);"><!-- Placeholder --></select>
								<label class="control-label" for="select"><span data-tag="pitPitmaster">Typ</span></label><i class="bar"></i>
							</div>
							<div id="pitmaster_profile_show0">
								<div class="form-group">
									<select onchange="showPitmasterProfile(0, this.value);" id="pid_profile0"><!-- Placeholder --></select>
									<label class="control-label" onchange="changePitmasterView(0);" for="select"><span data-tag="pitProfile">Profil</span></label></span><i class="bar"></i>
									<span class="icon-pencil icon-form" onclick="togglePitmasterView(0);">
								</div>					  
							</div>
							<div id="pitmaster_channel_show0">
								<div class="form-group">
									<select id="pitmaster_channel0"><!-- Placeholder --></select>
									<label class="control-label" for="select"><span data-tag="pitChannel">Kanal</span></label><i class="bar"></i>
								</div>	
							</div>
							<div id="pitmaster_set_show0">	
								<div class="form-group">
									<input type="text" id="pitmaster_set0" maxlength="5" onkeyup="validateNumber(this,'1');" required="required"/>
									<label class="control-label" for="input"><span data-tag="pitTemp">Solltemperatur</span></label><i class="bar"></i>
								</div>	
							</div>
							<div id="pitmaster_value_show0">	
								<div class="form-group">
								  <input type="text" id="pitmaster_value0" maxlength="3" onkeyup="validateNumber(this,'1');" required="required"/>
								  <label class="control-label" for="input"><span data-tag="pitValue">Pitmaster-Wert (%)</span></label><i class="bar"></i>
								</div>
							</div>
						</form>	
					</div>
				</div>
			</div>
			<div class="pure-g" id="pitmaster_id1">
				<div class="pure-u-1-1 pure-u-lg-1-1">
					<div class="1-box channel_conf">
						<form>
              <div class="form-group">
								<input value="Pitmaster 2" readonly>
								<label class="control-label" for="select"><span data-tag="pitID">Pitmaster</span></label><i class="bar"></i>
							</div>
							<div class="form-group">
								<select id="pitmaster_typ1" onchange="changePitmasterTyp(1);"><!-- Placeholder --></select>
								<label class="control-label" for="select"><span data-tag="pitPitmaster">Typ</span></label><i class="bar"></i>
							</div>
							<div id="pitmaster_profile_show1">
								<div class="form-group">
									<select onchange="showPitmasterProfile(1, this.value);" id="pid_profile1"><!-- Placeholder --></select>
									<label class="control-label" onchange="changePitmasterView(1);" for="select"><span data-tag="pitProfile">Profil</span></label></span><i class="bar"></i>
									<span class="icon-pencil icon-form" onclick="togglePitmasterView(1);">
								</div>					  
							</div>
							<div id="pitmaster_channel_show1">
								<div class="form-group">
									<select id="pitmaster_channel1"><!-- Placeholder --></select>
									<label class="control-label" for="select"><span data-tag="pitChannel">Kanal</span></label><i class="bar"></i>
								</div>	
							</div>
							<div id="pitmaster_set_show1">	
								<div class="form-group">
									<input type="text" id="pitmaster_set1" maxlength="5" onkeyup="validateNumber(this,'1');" required="required"/>
									<label class="control-label" for="input"><span data-tag="pitTemp">Solltemperatur</span></label><i class="bar"></i>
								</div>	
							</div>
							<div id="pitmaster_value_show1">	
								<div class="form-group">
								  <input type="text" id="pitmaster_value1" maxlength="3" onkeyup="validateNumber(this,'1');" required="required"/>
								  <label class="control-label" for="input"><span data-tag="pitValue">Pitmaster-Wert (%)</span></label><i class="bar"></i>
								</div>
							</div>
						</form>	
					</div>
				</div>
			</div>
		</div>	
		
		<div id="pitmaster_profile" class="content" style="display:none">
			<table class="table_nav" cellpadding="0" cellspacing="0" width="100%" border="0">
				<tr>
				  <td><span onclick="backPidProfile();"><span class="icon-arrow_left"></span><span data-tag="back">Zurück</span></span></td>
				  <td><span onclick="setPitmasterProfile();"><span data-tag="save">Speichern</span><span class="icon-arrow_right"></span></span></td>
				</tr>
			</table>
			<div id="pid_profile_name_show">
				<h3 class="headtitle" data-tag="pitNameTitle">Allgemein</h3>
				<div class="pure-g">
					<div class="pure-u-1-1 pure-u-lg-1-1">
						<div class="1-box channel_conf">
							<form>
								<div class="form-group">
								  <input type="text" id="pid_name" maxlength="12" required="required"/>
								  <label class="control-label" for="input"><span data-tag="pitProfileName">Profil-Name</span></label><i class="bar"></i>
								</div>
							</form>	
						</div>
					</div>
				</div>
			</div>	
			<div id="aktorik_settings_show">
				<h3 class="headtitle" data-tag="pitAktorTitle">Aktorik</h3>
				<div class="pure-g">
					<div class="pure-u-1-1 pure-u-lg-1-1">
						<div class="1-box channel_conf">
							<form>
								<div class="form-group">
									<select id="pitmaster_profile_aktor" onchange="changeActuatorTyp()"></select>
									<label class="control-label" onchange="" for="select"><span data-tag="pitAktor">Aktor</span></label><i class="bar"></i>
								</div>
								<div id="pid_dcvalue_show">
									<div class="form-group">
										<table class="table50" cellpadding="0" cellspacing="0" width="100%" border="0">
											<tr>
									  			<td>
													<div class="form-group">
										  				<input type="text" id="pid_DCmin" maxlength="4" onkeyup="validateNumber(this,'1');" required="required"/>
										  				<label class="control-label" for="input"><span data-tag="pitDCmin">DCmin [0-100%]</span></label><i class="bar"></i>
													</div>
									  			</td>
									  			<td>	
													<div class="form-group">
										  				<input type="text" id="pid_DCmax" maxlength="4" onkeyup="validateNumber(this,'1');" required="required"/>
										  				<label class="control-label" for="input"><span data-tag="pitDCmax">DCmax [0-100%]</span></label><i class="bar"></i>
													</div>							  
									  			</td>
											</tr>
										</table>
									</div>
								</div>
								<div id="pid_spvalue_show">
									<div class="form-group">
										<table class="table50" cellpadding="0" cellspacing="0" width="100%" border="0">
											<tr>
									  			<td>
													<div class="form-group">
										  				<input type="text" id="pid_SPmin" maxlength="4" onkeyup="validateNumber(this,'1');" required="required"/>
										  				<label class="control-label" for="input"><span data-tag="pitSPmin">SPmin [0-100%]</span></label><i class="bar"></i>
													</div>
									  			</td>
									  			<td>	
													<div class="form-group">
										  				<input type="text" id="pid_SPmax" maxlength="4" onkeyup="validateNumber(this,'1');" required="required"/>
										  				<label class="control-label" for="input"><span data-tag="pitSPmax">SPmax [0-100%]</span></label><i class="bar"></i>
													</div>							  
									  			</td>
											</tr>
										</table>
									</div>
								</div>
								<div id="pid_link_show">
									<div class="form-group">
							  			<select id="pid_link">
											<option value="0" data-tag="pitlinkkdegressiv">degressiv</option>
											<option value="1" data-tag="pitlinklinear">linear</option>
							  			</select>
							  			<label class="control-label" for="select" data-tag="pitlink">Aktorverknüpfung</label><i class="bar"></i>
									</div>
								</div>
							</form>	
						</div>
					</div>
				</div>
			</div>
			<div id="pid_settings_show">
				<h3 class="headtitle" data-tag="pidTitle">PID</h3>
				<div class="pure-g">
					<div class="pure-u-1-1 pure-u-lg-1-1">
						<div class="1-box channel_conf">
							<form>		
								<table class="table33" cellpadding="0" cellspacing="0" width="100%" border="0">
									<tr>
									  <td>
										<div class="form-group">
										  <input type="text" id="pid_Kp" maxlength="10" onkeyup="validateNumber(this,'1');" required="required"/>
										  <label class="control-label" for="input"><span data-tag="pidKp">Kp</span></label><i class="bar"></i>
										</div>								  	  
									  </td>
									  <td>
										<div class="form-group">
										  <input type="text" id="pid_Ki" maxlength="10" onkeyup="validateNumber(this,'3');" required="required"/>
										  <label class="control-label" for="input"><span data-tag="pidKi">Ki</span></label><i class="bar"></i>
										</div>								    
									  </td>
									  <td>
										<div class="form-group">
										  <input type="text" id="pid_Kd" maxlength="10" onkeyup="validateNumber(this,'1');" required="required"/>
										  <label class="control-label" for="input"><span data-tag="pidKd">Kd</span></label><i class="bar"></i>
										</div>								  		  
									  </td>
									</tr>
								</table>
								<table class="table50" cellpadding="0" cellspacing="0" width="100%" border="0">
									<tr>
									  <td>
										<div class="form-group">
										  <input type="text" id="pid_jump" maxlength="3" onkeyup="validateNumber(this,'1');" required="required"/>
										  <label class="control-label" for="input"><span data-tag="pidJump">Jump Power [10-100%]</span></label><i class="bar"></i>
										</div>
									  </td>
									  <td>	
										<div class="form-group" style="display:none"> <!-- TODO - Remove display:none-->
										  <div class="checkbox"><label><input id="pid_auto" type="checkbox" /><i class="helper"></i><span data-tag="pidAutotune">Autotune</span></label></div>
										</div>							  
									  </td>
									</tr>
								</table>
							</form>	
						</div>
					</div>
				</div>
			</div>
			<div id="advanced_settings_show">
				<h3 class="headtitle" data-tag="pitAdvancesTitle">Spezialfunktionen</h3>
				<div class="pure-g">
					<div class="pure-u-1-1 pure-u-lg-1-1">
						<div class="1-box channel_conf">
							<form>
								<div class="checkbox"><label><input id="pid_opl" type="checkbox" /><i class="helper"></i><span data-tag="pitLid">Deckelüberwachung</span></label></div>
							</form>	
						</div>
					</div>
				</div>
			</div>
        </div>
		<!-- ################################################### -->
		<div id="channel_settings" class="content" style="display:none">
			<table class="table_nav" cellpadding="0" cellspacing="0" width="100%" border="0">
				<tr>
				  <td><span onclick="showIndex();"><span class="icon-arrow_left"></span><span data-tag="back">Zurück</span></span></td>
				  <td><span id="channel_settings_save"><span data-tag="save">Speichern</span><span class="icon-arrow_right"></span></span></td>
				</tr>
			</table>			
			<div class="float-left text-align-left"><h3 id="channel_settings_headtitle" class="headtitle">N.C.</h3></div>
			<div class="float-right text-align-right"><span onclick="setHelpBox('Kanal Einstellungen',help_channel)" class="icon-question_sign"></span></div>
			<div style="clear:both;"></div>			
            <div class="pure-g">
				<div class="pure-u-1-1 pure-u-md-1-1 pure-u-lg-1-1">
					<div class="1-box channel_conf color_border">
						<form>							
							<div class="form-group">
							  <input type="text" class="temp_input" id="channel_name" maxlength="10" required="required"/>
							  <label class="control-label" for="input" data-tag="channel_name">Kanalname</label><i class="bar"></i>
							</div>
							<div class="form-group">
							  <input class="temp_input" id="temp_max" type="text" onkeyup="validateNumber(this,'1');" maxlength="6" required="required"/>
							  <label class="control-label" for="input" data-tag="temp_max">Temperatur-Obergrenze</label><i class="bar"></i>
							</div>							
							<div class="form-group">
							  <input class="temp_input" id="temp_min" type="text" onkeyup="validateNumber(this,'1');" maxlength="6" required="required"/>
							  <label class="control-label" for="input" data-tag="temp_min">Temperatur-Untergrenze</label><i class="bar"></i>
							</div>												
							<div class="form-group">
							  <select id="sensor">
									<!-- Placeholder -->
							  </select>
							  <label class="control-label" for="select" data-tag="temp_sensor">Fühlertyp</label><i class="bar"></i>
							</div>							
						</form>
						<div class="col-lg-6 picker-wrapper">
							<div class="form-group">
							  <input id="btn-color-picker" class="btn btn-default" value="&#x025A0;" type="text" readonly/>
							  <label class="control-label" for="input" data-tag="color">Farbe</label><i class="bar"></i>
							</div>
							<!-- <button id="btn-color-picker" class="btn btn-default">Select color</button> -->
							<div class="color-picker"></div>
						</div>
						
						<form>
							<div class="checkbox"><label><input id="pushalarm" type="checkbox" checked="checked"/><i class="helper"></i><p data-tag="push_alarm">Push-Alarm</p></label></div>
							<div class="checkbox"><label><input id="hwalarm" type="checkbox" checked="checked"/><i class="helper"></i><p data-tag="buzzer_alarm">Piepser-Alarm</p></label></div>
						</form>
					</div>
				</div>
			</div>
        </div>
		<!-- ################################################### -->
		<div id="system_config" class="content" style="display:none">
			<!-- html for about-Site -->
			<table class="table_nav" cellpadding="0" cellspacing="0" width="100%" border="0">
				<tr>
				  <td><span onclick="showIndex();"><span class="icon-arrow_left"></span><span data-tag="back">Zurück</span></span></td>
				  <td><span onclick="setSystem();"><span data-tag="save">Speichern</span><span class="icon-arrow_right"></span></span></td>
				</tr>
			</table>
			<div class="float-left text-align-left"><h3 class="headtitle" data-tag="system_settings">System-Einstellungen</h3></div>
			<div class="float-right text-align-right"><span onclick="setHelpBox('System Einstellungen',help_settings)" class="icon-question_sign"></span></div>
			<div style="clear:both;"></div>
			<div class="pure-g">
				<div class="pure-u-1-1 pure-u-md-1-1 pure-u-lg-1-1">
					<div class="1-box channel_conf">
						<form>							
							<div class="form-group">
							  <input type="text" id="hostname" maxlength="13" required="required"/>
							  <label class="control-label" for="input" data-tag="hostname">Hostname</label><i class="bar"></i>
							</div>
							<div class="form-group">
							  <input type="text" id="apname" maxlength="13" required="required"/>
							  <label class="control-label" for="input" data-tag="ap_name">APN</label><i class="bar"></i>
							</div>										
							<div class="form-group">
							  <select id="language" onchange="loadTranslation(this.value)">
								<option value="de" data-tag="german">Deutsch</option>
								<option value="en" data-tag="english">Englisch</option>
							  </select>
							  <label class="control-label" for="select" data-tag="language">Sprache</label><i class="bar"></i>
							</div>							
							<div class="form-group">
							  <select id="unit">
								<option value="C" data-tag="celsius">Celsius</option>
								<option value="F" data-tag="fahrenheit">Fahrenheit</option>
							  </select>
							  <label class="control-label" for="select" data-tag="unit">Einheit</label><i class="bar"></i>
							</div>	
							<div class="form-group">
							  <select id="hwversion"></select><label class="control-label" for="select" data-tag="hw_version">Hardwareversion</label><i class="bar"></i>
							</div>
							<div class="checkbox"><label><input id="searchUpdate" type="checkbox"/><i class="helper"></i><p data-tag="update_search">Automatisch nach Updates suchen</p></label></div>	
							<div class="checkbox"><label><input id="prerelease" type="checkbox"/><i class="helper"></i><p data-tag="prerelease">Beta-Versionen in der Suche mit einschießen</p></label></div>								
						</form>
					</div>
				</div>
			</div>
			<div class="float-left text-align-left"><h3 class="headtitle" id="displayheader" data-tag="display_settings">Display-Einstellungen</h3></div>
			<div style="clear:both;"></div>
			<div class="pure-g" id="displaybuttons">
				<div class="pure-u-1-1 pure-u-md-1-1 pure-u-lg-1-1">
					<div class="1-box channel_conf">
						<form>
							<p class="pure-button pure-button-primary" onclick="rotate();"data-tag="rotate_display">Display drehen</p>
							<p class="pure-button pure-button-primary" onclick="calibrate();"data-tag="calibrate_touch">Touch kalibrieren</p>			
						</form>
					</div>
				</div>
			</div>
        </div>
		<!-- ################################################### -->
		<div id="extended_settings" class="content" style="display:none">
			<!-- html for about-Site -->
			<table class="table_nav" cellpadding="0" cellspacing="0" width="100%" border="0">
				<tr>
				  <td><span onclick="showIndex();"><span class="icon-arrow_left"></span><span data-tag="back">Zurück</span></span></td>
				  <td><span onclick=""><span data-tag="save">Speichern</span><span class="icon-arrow_right"></span></span></td>		  
				</tr>
			</table>
			<h3 class="headtitle">Extended settings</h3>
			<div class="pure-g">
				<div class="pure-u-1-1 pure-u-md-1-1 pure-u-lg-1-1">
					<div class="1-box channel_conf">
						<form>							
							<p class="pure-button pure-button-primary" onclick="restart();">Restart Nano</p>
							<p class="pure-button pure-button-primary" onclick="setgodmode(0);">Start-Ton</p>
							<p class="pure-button pure-button-primary" onclick="setgodmode(1);">Nobattery</p>
							<p class="pure-button pure-button-primary" onclick="setgodmode(2);">V2</p>
							<p class="pure-button pure-button-primary" onclick="setgodmode(3);">Damper</p>
							<p class="pure-button pure-button-primary" onclick="setgodmode(4);">Typ K</p>
						</form>
					</div>
				</div>
			</div>
        </div>
		<!-- ################################################### -->

		<div id="thingspeak" class="content" style="display:none">
			<table class="table_nav" cellpadding="0" cellspacing="0" width="100%" border="0">
				<tr>
				  <td><span onclick="showIndex();"><span class="icon-arrow_left"></span><span data-tag="back">Zurück</span></span></td>
				  <td><span onclick="setThingspeak();"><span data-tag="save">Speichern</span><span class="icon-arrow_right"></span></span></td>	
				</tr>
			</table>
			<div class="float-left text-align-left"><h3 class="headtitle" data-tag="cloudTitle">Nano-Cloud</h3></div>
			<div class="float-right text-align-right"><span onclick="setHelpBox('Nano Cloud',help_cloud)" class="icon-question_sign"></span></div>
			<div style="clear:both;"></div>
			<div class="pure-g">
				<div class="pure-u-1-1 pure-u-lg-1-1">
					<div class="1-box channel_conf">
						<form>
							<div class="checkbox">
							  <label>
								<input id="CLon" type="checkbox" checked="checked"/><i class="helper"></i><span data-tag="cloudActivate">Nano-Cloud aktivieren</span>
							  </label>
							</div>
							<div class="form-group">
							  <select id="CLinterval">
								<option value="15" data-tag="fifteenSeconds">15 Sekunden</option>
								<option value="30" data-tag="thirtySeconds">30 Sekunden</option>
								<option value="60" data-tag="oneMinutes">1 Minute</option>
								<option value="120" data-tag="twoMinutes">2 Minuten</option>
								<option value="300" data-tag="fiveMinutes">5 Minuten</option>
							  </select>
							  <label class="control-label" for="select"><span data-tag="sendInterval">Sendeintervall</span></label><i class="bar"></i>
							</div>	
							<div class="form-group">
							  <label for="input"><a id="CLtoken" class="link" href="#"></a></label><i class="bar"></i>
							</div>
							<p class="pure-button pure-button-primary" onclick="newToken();" data-tag="cloudBtnToken">Token generieren</p>
						</form>
					</div>
				</div>
			</div>		
			<div id="mqttheader">
				<div class="float-left text-align-left"><h3 class="headtitle" data-tag="mqttTitle">Privater MQTT Client</h3></div>
				<div class="float-right text-align-right"><span onclick="setHelpBox('Private MQTT Client',help_mqtt)" class="icon-question_sign"></span></div>
				<div style="clear:both;"></div>
				<div class="pure-g">
					<div class="pure-u-1-1 pure-u-lg-1-1">
						<div class="1-box channel_conf">
							<form>							
							  <div class="checkbox">
							    <label>
								  <input id="PMQon" type="checkbox" checked="checked"/><i class="helper"></i><span data-tag="mqttActivate">MQTT Client aktivieren</span>
							    </label>
							  </div>
							  <table class="table50" cellpadding="0" cellspacing="0" width="100%" border="0">
								  <tr>
								    <td>
									  <div class="form-group">
										  <input type="text" id="PMQhost" maxlength="26" required="required"/>
										  <label class="control-label" for="input"><span data-tag="mqttHost">MQTT Host</span></label><i class="bar"></i>
									  </div>
								    </td>
								    <td>
									  <div class="form-group">
										  <input type="text" id="PMQport" maxlength="26" required="required"/>
										  <label class="control-label" for="input"><span data-tag="mqttPort">MQTT Port</span></label><i class="bar"></i>
									  </div>
								    </td>
								  </tr>
								  <tr>
								    <td>
									  <div class="form-group">
										  <input type="text" id="PMQuser" maxlength="26" required="required"/>
										  <label class="control-label" for="input"><span data-tag="mqttUser">MQTT Benutzer</span></label><i class="bar"></i>
									  </div>
								    </td>
								    <td>
									  <div class="form-group">
										  <input type="text" id="PMQpass" maxlength="26" required="required"/>
										  <label class="control-label" for="input"><span data-tag="mqttPwd">MQTT Passwort</span></label><i class="bar"></i>
									  </div>
								    </td>
								  </tr>
								  <tr>
								    <td>
									  <div class="form-group">
									    <select id="PMQinterval">
										  <option value="10" data-tag="tenSeconds">10 Sekunden</option>
										  <option value="30" data-tag="thirtySeconds">30 Sekunden</option>
										  <option value="60" data-tag="oneMinutes">1 Minute</option>
										  <option value="120" data-tag="twoMinutes">2 Minuten</option>
										  <option value="300" data-tag="fiveMinutes">5 Minuten</option>
									    </select>
									    <label class="control-label" for="select"><span data-tag="sendInterval">Sendeintervall</span></label><i class="bar"></i>
									  </div>
								    </td>
								    <td>	
									  <div class="form-group">
									    <select id="PMQqos">
										  <option value="0">0</option>
										  <option value="1">1</option>
										  <option value="2">2</option>
									    </select>
									    <label class="control-label" for="select"><span data-tag="mqttQos">QoS</span></label><i class="bar"></i>
									  </div>
								    </td>
								  </tr>
							  </table>
							</form>
						</div>
					</div>
				</div>
			</div>

        </div>
		<!-- ################################################### -->
		<div id="push_notification" class="content" style="display:none">
			<!-- html for thingspeak-Site -->
			<table class="table_nav" cellpadding="0" cellspacing="0" width="100%" border="0">
				<tr>
				  <td><span onclick="showIndex();"><span class="icon-arrow_left"></span><span data-tag="back">Zurück</span></span></td>
				  <td><span onclick="setPushNotification();"><span data-tag="save">Speichern</span><span class="icon-arrow_right"></span></span></td>
				</tr>
			</table>
			<div class="float-left text-align-left"><h3 class="headtitle" data-tag="notificationTitle">Benachrichtungsdienst</h3></div>
			<div class="float-right text-align-right"><span onclick="setHelpBox('Push Einstellungen',help_notification)" class="icon-question_sign"></span></div>
			<div style="clear:both;"></div>
			<div class="pure-g">
				<div class="pure-u-1-1 pure-u-lg-1-1">
					<div class="1-box channel_conf">
						<form>	
							<div class="checkbox">
							  <label>
								<input id="TGon" type="checkbox" checked="checked"/><i class="helper"></i><span data-tag="notificationActivate">Push-Benachrichtung aktivieren</span>
							  </label>
							</div>								
							<div class="form-group">
							  <input type="text" class="temp_input" id="TGtoken" maxlength="50" required="required"/>
							  <label class="control-label" for="input"><span data-tag="notificationToken">API Token/Key</span></label><i class="bar"></i>
							</div>
							<div class="form-group">
							  <input type="text" class="temp_input" id="TGid" maxlength="30" required="required"/>
							  <label class="control-label" for="input"><span data-tag="notificationKey">Chat ID / User Key</span></label><i class="bar"></i>
							</div>
							<table class="table50" cellpadding="0" cellspacing="0" width="100%" border="0">
								<tr>
								  <td>
									<div class="form-group">
									  <select id="push_service"></select>
									  <label class="control-label" onchange="" for="select"><span data-tag="notificationService">Dienst</span></label><i class="bar"></i>
									</div>
								  </td>
								  <td>	
									<div class="form-group">
									  <select id="push_repeat">
										<option value="1" data-tag="repeadOnce">1x</option>
										<option value="3" data-tag="repeadThreeTimes">3x</option>
										<option value="5" data-tag="repeadFiveTimes">5x</option>
										<option value="10" data-tag="repeadTenTimes">10x</option>
									  </select>
									  <label class="control-label" for="select" data-tag="notificationRepead">Wiederholungen</label><i class="bar"></i>
									 </div>							  
								  </td>
								</tr>
							</table>
							<p class="pure-button pure-button-primary" onclick="sendPushNotification();" data-tag="notificationSendMessage">Testnachricht senden</p>
						</form>
					</div>
				</div>
			</div>
        </div>
		<!-- ################################################### -->
		<div id="about" class="content" style="display:none">
			<table class="table_nav" cellpadding="0" cellspacing="0" width="100%" border="0">
				<tr>
				  <td><span onclick="showIndex();"><span class="icon-arrow_left"></span><span data-tag="back">Zurück</span></span></td>
				  <td></td>
				</tr>
			</table>
			<h3 class="headtitle" data-tag="aboutTitle">WLANThermo Team</h3>
			<div class="pure-g">
				<div class="pure-u-1-1  pure-u-md-1-1 pure-u-lg-1-1">
					<div class="1-box channel_conf">
						<table>
							<tr><td>&#10032;&nbsp;Armin Thinnes</td></tr>
							<tr><td>&#10032;&nbsp;Alexander Schäfer</td></tr>
							<tr><td>&#10032;&nbsp;Björn Schrader</td></tr>
							<tr><td onclick="touchStart();">&#10032;&nbsp;Florian Riedl</td></tr>
							<tr><td>&#10032;&nbsp;Lukas Jedinger</td></tr>
							<tr><td>&#10032;&nbsp;Maik Kaste</td></tr>
							<tr><td>&#10032;&nbsp;Martin Körner</td></tr>
							<tr><td>&#10032;&nbsp;Steffen Ochs</td></tr>
						</table>
					</div>
				</div>
			</div>
			<h3 class="headtitle" data-tag="forumTitle">WLANThermo Forum</h3>
			<div class="pure-g">
				<div class="pure-u-1-1  pure-u-md-1-1 pure-u-lg-1-1">
					<div class="1-box channel_conf">
						<form>
							<a href="https://forum.wlanthermo.de" target="_blank" data-tag="forumUrl">Wir freuen uns über deinen Besuch im Forum!</a>
						</form>
					</div>
				</div>
			</div>
        </div>
		<!-- ################################################### -->
		<div id="history" class="content" style="display:none">
			<table class="table_nav" cellpadding="0" cellspacing="0" width="100%" border="0">
				<tr>
				  <td><span onclick="showIndex();"><span class="icon-arrow_left"></span><span data-tag="back">Zurück</span></span></td>
				  <td></td>
				</tr>
			</table>
			<h3 class="headtitle" data-tag="historyTitle">Historie</h3>
			<div class="pure-g">
				<div class="pure-u-1-1  pure-u-md-1-1 pure-u-lg-1-1">
					<div class="1-box channel_conf">
						<p class="pure-button pure-button-primary" onclick="saveChartToHistory();" data-tag="btnSaveChart">Chart speichern</p>
						<table class="historyTable" width="100%">
							  <thead>
								<tr>
								  <th data-tag="date">Datum</th>
								  <th data-tag="historyTableName">Name</th>
								  <th></th>
								</tr>
							  </thead>
							  <tbody id="historylist">
							  </tbody>
							<!--History Liste -->
						</table> 
					</div>
				</div>
			</div>
        </div>
		<!-- ################################################### -->
		<div id="helpBox" class="helpBox">
			<!-- helpBox content -->
			<div class="helpBox-content">
				<div class="helpBox-header">
					<span class="close" onclick="byId('helpBox').style.display='none'">&times;</span>
					<h2 id="helpBoxTitle">Title</h2>
				</div>
				<div id="helpBoxObject" class="helpBox-body">
				<!-- Placeholder -->
				</div>
			</div>
		</div>
		<!-- ################################################### -->		
    </div>
</div>
<div id="cover">
	<div id="spinner"></div>
</div>
<script>
	// -----------------------------------------------------------------------------------
    var debug = false;
	// ----------------------------------------------------------------------------------- 
	var byId = function( id ) { return document.getElementById( id ); };
	var byClass = function( id ) { return document.getElementsByClassName( id ); };
	var getIcon = function( icon ) { return '<span class="icon-'  + icon + '"></span>'; };
	byId('index').style.display = "inline";
	// -----------------------------------------------------------------------------------
	var help_wifi = '<p><span>Verbinde dein WLANThermo mit deinem Heimnetzwerk und erweitere somit die Funktionsvielfalt deines WLANThermo.</span></p><p><span>Siehe auch: </span><a href="https://github.com/WLANThermo-nano/WLANThermo_nano_Software/wiki/WLAN" target="_blank"><span style="color:#3366ff">Wiki - WLAN</span></a></p>';
	var help_settings = '<p><span>Konfiguriere dein WLANThermo Nano mit Hilfe der Systemeinstellungen und mach es zu DEINEM WLANThermo.</span></p><p><span>Siehe auch: </span><a href="https://github.com/WLANThermo-nano/WLANThermo_nano_Software/wiki/System-Einstellungen" target="_blank"><span style="color:#3366ff">Wiki - System</span></a></p>';
	var help_pitmaster = '<p><span>Willst du deine Grilltemperaturen nicht nur beobachten, sondern auch regeln? Dann besorge dir die passende Pitmaster-Hardware und leg los. Ben&ouml;tigt Pitmaster-Hardware.</span></p><p><span>Siehe auch: </span><a href="https://github.com/WLANThermo-nano/WLANThermo_nano_Software/wiki/Pitmaster" target="_blank"><span style="color:#3366ff">Wiki - Pitmaster</span></a></p>';
	var help_notification = '<p><span>Lass dich bei einem Kanalalarm mit einer Push-Nachricht über den Nachrichtendienst Telegram oder Pushover benachrichtigen. Ben&ouml;tigt Internetzugang.</span></p><p><span>Siehe auch: </span><a href="https://github.com/WLANThermo-nano/WLANThermo_nano_Software/wiki/Push-Notification" target="_blank"><span style="color:#3366ff">Wiki - Notification</span></a></p>';
	var help_mqtt = '<p><span>Kopple dein WLANThermo Nano mit deiner Homeautomatic und nutze dafür die MQTT-Schnittstelle deines WLANThermo. Ben&ouml;tigt einen MQTT-Broker.</span></p><p><span>Siehe auch: </span><a href="https://github.com/WLANThermo-nano/WLANThermo_nano_Software/wiki/Private-MQTT" target="_blank"><span style="color:#3366ff">Wiki - Private-MQTT</span></a></p>';
	var help_cloud = '<p><span>Der Nano Cloud Service erm&ouml;glicht dir den gesch&uuml;tzten Zugriff auf deine Temperaturdaten auch au&szlig;erhalb deines Heim-Netzwerks. Ben&ouml;tigt Internetzugang. </span></p><p><span>Siehe auch: </span><a href="https://github.com/WLANThermo-nano/WLANThermo_nano_Software/wiki/Nano-Cloud-Service" target="_blank"><span style="color:#3366ff">Wiki - Nano Cloud</span></a></p>';
	var help_channel = '<p><span>Mit Hilfe der Kanal-Einstellungen passt du den Messkanal an den angeschlossenen F&uuml;hler an. Zus&auml;tzlich kannst du Grenzwerte für die Alarmfunktion vorgeben.</span></p><p><span>Siehe auch: </span><a href="https://github.com/WLANThermo-nano/WLANThermo_nano_Software/wiki/Kanal-Einstellungen" target="_blank"><span style="color:#3366ff">Wiki - Kanal</span></a></p>';
	// -----------------------------------------------------------------------------------
	(function (window, document) {
		var layout = byId('layout'),menu = byId('menu'),menuLink = byId('menuLink'),menuHome = byId('menuHome'),menuPitmaster = byId('menuPitmaster'),menuNotification = byId('menuNotification'),menuWlan = byId('menuWlan'),menuSystem = byId('menuSystem'),menuIOT = byId('menuIOT'),menuHistory = byId('menuHistory'),menuAbout = byId('menuAbout'),content  = byId('main');
		function toggleClass(element, className) {
			var classes = element.className.split(/\s+/), length = classes.length, i = 0;
			for(; i < length; i++) {
			  if (classes[i] === className) {
				classes.splice(i, 1);
				break;
			  }
			}
			// The className is not found
			if (length === classes.length) {
				classes.push(className);
			}
			element.className = classes.join(' ');
		}

		function toggleAll(e) {
			var active = 'active';
			e.preventDefault();
			toggleClass(layout, active);
			toggleClass(menu, active);
			toggleClass(menuLink, active);
		}

		menuLink.onclick = function (e) {toggleAll(e);};
		menuHome.onclick = function (e) {if (menu.className.indexOf('active') !== -1) {toggleAll(e);showIndex();}};
		menuWlan.onclick = function (e) {if (menu.className.indexOf('active') !== -1) {toggleAll(e);showWLAN();}};
		menuIOT.onclick = function (e) {if (menu.className.indexOf('active') !== -1) {toggleAll(e);showIOT();}};
		menuPitmaster.onclick = function (e) {if (menu.className.indexOf('active') !== -1) {toggleAll(e);showPitmaster(0);}};
		menuNotification.onclick = function (e) {if (menu.className.indexOf('active') !== -1) {toggleAll(e);showPushNotification();}};
		menuSystem.onclick = function (e) {if (menu.className.indexOf('active') !== -1) {toggleAll(e);showSystem();}};
		menuHistory.onclick = function (e) {if (menu.className.indexOf('active') !== -1) {toggleAll(e);showHistory();}};
		menuAbout.onclick = function (e) {if (menu.className.indexOf('active') !== -1) {toggleAll(e);showAbout();}};
		content.onclick = function(e) {if (menu.className.indexOf('active') !== -1) {toggleAll(e);}};
	}(this, this.document));

	document.addEventListener("DOMContentLoaded", function(event) { 
		setThermoName();
		setInterval("readTemp();", 2000);
	});
	
	function showWLAN(){
		hideAll();
		byId('wlan_config').style.display = "inline";
		networklist();
		networkscan();
	}
	
	function wlan_active(){
		if(byId('wlan_active').checked){
	
		}else{
			txt = 'Soll die Wifi-Verbindung bis zum nächsten Restart des Systems wirklich abgeschaltet werden?';
			if (confirm(txt) == true) {
				loadJSON('stopwifi', '', '60000', function (response) {
                  if(response == 'true'){      
                    self.location.href='about:blank'
                  }
                });
			} else {
				byId('wlan_active').checked = true;
			}
		}
	}
	
	function clearWifi(){
		txt = 'Sollen wirklich alle Netzwerkverbindungsdaten gelöscht werden?\nNano startet danach im AP-Modus neu.';
		if (confirm(txt) == true) {
			loadJSON('clearwifi', '', '60000', function (response) {
                if(response == 'true'){      
                   self.location.href='about:blank'
                }
			});
        }
	}
	
	function showIOT(){
		hideAll();
		showLoader('true');
		loadJSON('settings', '', '3000', function (response) {
			jr = JSON.parse(response);
			byId('PMQon').checked = jr.iot.PMQon;
			byId('PMQhost').value = jr.iot.PMQhost;
			byId('PMQport').value = jr.iot.PMQport;
			byId('PMQuser').value = jr.iot.PMQuser;
			byId('PMQpass').value = jr.iot.PMQpass;
			byId('PMQqos').value = jr.iot.PMQqos;
			byId('PMQinterval').value = jr.iot.PMQint;
			byId('CLon').checked = jr.iot.CLon;
			byId('CLinterval').value = jr.iot.CLint; 
			byId('CLtoken').innerHTML = "https://" + jr.iot.CLurl + "?api_token=" + jr.iot.CLtoken;
			byId("CLtoken").setAttribute("href", "https://" + jr.iot.CLurl + "?api_token=" + jr.iot.CLtoken);		
			byId('thingspeak').style.display = "inline";
			byId('mqttheader').style.display = "inline";
			showLoader('false');
		})	
	}	

	function newToken(){
		showLoader('true');
		loadJSON('newtoken', '', '3000', function (response){
			var str = byId('CLtoken').innerHTML;
			var pos = str.lastIndexOf('=');
			str = str.substr(0, pos + 1);
			byId('CLtoken').innerHTML = str + response;			
			byId("CLtoken").setAttribute("href", str + response);
			showLoader('false');
		})
	}
	
	function setThingspeak(){
		showLoader('true');
		loadJSON('settings', '', '3000', function (response){
			jr = JSON.parse(response);
			jr.iot.PMQon = byId('PMQon').checked;
			jr.iot.PMQhost = byId('PMQhost').value;
			jr.iot.PMQport = byId('PMQport').value;
			jr.iot.PMQuser = byId('PMQuser').value;
			jr.iot.PMQpass = byId('PMQpass').value;
			jr.iot.PMQqos = byId('PMQqos').value;
			jr.iot.PMQint = byId('PMQinterval').value;
			jr.iot.CLon = byId('CLon').checked;
			jr.iot.CLtoken = byId('CLtoken').value;
			jr.iot.CLint = byId('CLinterval').value;
			var data = JSON.stringify(jr.iot);
			showLoader('true');
			loadJSON('setIoT', data, '60000', function (response) {
				showIndex();
				showLoader('false');
			})		
		})
	}
	// -----------------------------------------------------------------------------------	
	function showPushNotification(){
		hideAll();
		showLoader('true');
		loadJSON('settings', '', '3000', function (response) {
			jr = JSON.parse(response);
			clearOption('push_service');
			for (var i = 0; i < jr.notes.ext.services.length; i++) {
				byId('push_service').options[byId('push_service').options.length] = new Option(jr.notes.ext.services[i], i);
			}
			byId('push_service').value = jr.notes.ext.service;
			byId('TGon').checked = jr.notes.ext.on;
			byId('TGtoken').value = jr.notes.ext.token;
			byId('TGid').value = jr.notes.ext.id;
			byId('push_repeat').value = jr.notes.ext.repeat;
			byId('push_notification').style.display = "inline";
			showLoader('false');
		})				
	}
	
	function setPushNotification(){
		showLoader('true');
		loadJSON('settings', '', '3000', function (response){
			jr = JSON.parse(response);
			jr.notes.ext.on = byId('TGon').checked;
			jr.notes.ext.token = byId('TGtoken').value;
			jr.notes.ext.id = byId('TGid').value;
			jr.notes.ext.service = byId('push_service').value;
			jr.notes.ext.repeat = byId('push_repeat').value;
			var data = JSON.stringify(jr.notes.ext);
			showLoader('true');
			loadJSON('setPush', data, '60000', function (response) {
				showIndex();
				showLoader('false');
			})		
		})
	}

	function sendPushNotification(){
		//eventuell zusammenfassen mit setPushNotification()
		loadJSON('settings', '', '3000', function (response){
			jr = JSON.parse(response);
			jr.notes.ext.on = 2;		// sende Testnachricht
			jr.notes.ext.token = byId('TGtoken').value;
			jr.notes.ext.id = byId('TGid').value;
			jr.notes.ext.service = byId('push_service').value;
			jr.notes.ext.repeat = byId('push_repeat').value;
			var data = JSON.stringify(jr.notes.ext);
			showLoader('true');
			loadJSON('setPush', data, '60000', function (response) {
				showLoader('false');
			})		
		})	
	
	}
	// -----------------------------------------------------------------------------------
	
	function showHistory(){
		hideAll();
		byId('history').style.display = "inline";
		loadHistoryList();
	}
	
	function loadHistoryList(){
		loadJSON('settings', '', '3000', function (response){
			jr = JSON.parse(response);
			var json = new Object();
			json.device = jr.device;
			var history = {"task": "read"};
			json.history = history;
			console.log('HistoryRequest:' + JSON.stringify(json));
			loadJSON('https://api.wlanthermo.com/index1.php', JSON.stringify(json), '60000', function (response) {
				jr = JSON.parse(response);
				byId('historylist').innerHTML = '';
				var table_historylist = byId('historylist');
				for (var i = 0; i < jr.history.list.length; i++) {
					var row = table_historylist.insertRow(-1);
					addCell(row,new Date(jr.history.list[i].ts_start * 1000).format('d.m.y'),'','0');
					addCell(row,'ABCDEFGHIJKL','','1');
					addCell(row,'<span class="icon-stats-dots" onclick="goHistory(\''+jr.history.list[i].api_token+'\')"></span>&nbsp;&nbsp;<span class="icon-download"> </span>&nbsp;&nbsp;<span class="icon-trash" onclick="deleteHistoryRow(\''+jr.history.list[i].api_token+'\')"> </span>','','2');
				}	
				showLoader('false');
			})				
		})	
	}
	function goHistory(history_token){
		window.location = "https://cloud.wlanthermo.de/indexB.html?history_token=" + history_token;
	}
	function deleteHistoryRow(api_token){
		loadJSON('settings', '', '3000', function (response){
			jr = JSON.parse(response);
			var json = new Object();
			json.device = jr.device;
			var history = {"task": "delete","api_token":api_token};
			json.history = history;
			<!-- alert(JSON.stringify(json)); -->
			txt = 'Wollen Sie den aktuellen Eintrag wirklich löschen?';
			if (confirm(txt) == true) {
				loadJSON('https://api.wlanthermo.com/index1.php', JSON.stringify(json), '60000', function (response) {
					jr = JSON.parse(response);
					loadHistoryList();
					<!-- alert(response); -->
					showLoader('false');
				})
			}				
		})					
	}
	
	function saveChartToHistory(){
		loadJSON('settings', '', '3000', function (response){
			jr = JSON.parse(response);
			var json = new Object();
			json.device = jr.device;
			var history = {"task": "save"};
			json.history = history;
			json.history.api_token = jr.iot.CLtoken;
			<!-- alert(JSON.stringify(json)); -->
			loadJSON('https://api.wlanthermo.com/index1.php', JSON.stringify(json), '60000', function (response) {
				<!-- alert(response); -->
				loadHistoryList();
				showLoader('false');
			})				
		})		
	}
	
	// -----------------------------------------------------------------------------------
		
	function showSetChannel(channel){
        console.log(channel);
		hideAll();
        showLoader('true');
		byId('sensor').disabled = false;
		var sensors;
        loadJSON('settings', '', '3000', function (response) {
            jr = JSON.parse(response);
            clearOption('sensor');
			sensors = jr.sensors;
            for (var i = 0; i < sensors.length; i++) {
				if(sensors[i].fixed == false) {
					byId('sensor').options[i] = new Option(sensors[i].name, sensors[i].type);
				}
            }
            loadJSON('data', '', '3000', function (response) {
                jr = JSON.parse(response);
                byId('channel_settings_save').setAttribute('onclick','setChannel(' + channel + ');');
                byId('channel_settings_headtitle').innerHTML  = jr.channel[channel].name;
                byId('channel_name').value  = jr.channel[channel].name;
                byId('temp_max').value  = jr.channel[channel].max;
                byId('temp_min').value  = jr.channel[channel].min;
				byId('btn-color-picker').style.color = jr.channel[channel].color;
				byId('btn-color-picker').setAttribute('data-color', jr.channel[channel].color);
				document.getElementsByClassName("color_border")[0].style.borderColor = jr.channel[channel].color;

				if(jr.channel[channel].fixed) {
					clearOption('sensor');
					for (var i = 0; i < sensors.length; i++) {
						if(sensors[i].type == jr.channel[channel].typ ) {
							byId('sensor').options[i] = new Option(sensors[i].name, sensors[i].type);
							break;
						}
            		}
					byId('sensor').disabled = true;
				}

				byId('sensor').value = jr.channel[channel].typ;

                switch(jr.channel[channel].alarm) {
					case 0:
						byId('pushalarm').checked = false;
						byId('hwalarm').checked = false;
						break;
					case 1:
						byId('pushalarm').checked = true;
						byId('hwalarm').checked = false;
						break;
					case 2:
						byId('pushalarm').checked = false;
						byId('hwalarm').checked = true;
						break;
					case 3:
						byId('pushalarm').checked = true;
						byId('hwalarm').checked = true;
						break;
				} 				                
				byId('channel_settings').style.display = "inline";
                showLoader('false');
            })
        })
    }

	function setChannel(channel){
		console.log('Test');
		console.log(byId('btn-color-picker').getAttribute('data-color'));
		showLoader('true');
		loadJSON('data', '', '3000', function (response) {
			jr = JSON.parse(response);
			jr.channel[channel].min = byId('temp_min').value;
			jr.channel[channel].max = byId('temp_max').value;
			jr.channel[channel].name = byId('channel_name').value;
			jr.channel[channel].typ = byId('sensor').value;
			var push = 0;
			if(byId('pushalarm').checked == false && byId('hwalarm').checked == false){
				push = 0;
			}else if(byId('pushalarm').checked == true && byId('hwalarm').checked == false){
				push = 1;
			}else if(byId('pushalarm').checked == false && byId('hwalarm').checked == true){
				push = 2;
			}else if(byId('pushalarm').checked == true && byId('hwalarm').checked == true){
				push = 3;
			}
			jr.channel[channel].alarm = push;
			jr.channel[channel].color = byId('btn-color-picker').getAttribute('data-color');
			var data = JSON.stringify(jr.channel[channel]);
			showLoader('true');
			loadJSON('setchannels', data, '60000', function (response) {
				showIndex();
				showLoader('false');
			})		
		})	
	}
	// -----------------------------------------------------------------------------------
	function clearOption(id){
		var selectbox = document.getElementById(id);
		var i;
		for(i = selectbox.options.length - 1 ; i >= 0 ; i--){
			selectbox.remove(i);
		}
	}
	// -----------------------------------------------------------------------------------	

	function setThermoName(){
		showLoader('true');
		loadJSON('settings', '', '5000', function (response) {
			jr = JSON.parse(response);
			byId('thermoname').innerHTML = jr.system.host;
			if(jr.system.language != "de"){
				loadTranslation(jr.system.language);
			}
			if(jr.system.getupdate == 'false'){
				byClass("notification")[0].style.display = "none";
			}else{
				byClass("notification")[0].style.display = "inline";
			}
			byId('menuVersion').innerHTML = jr.device.sw_version;
			showLoader('false');
		})
	}
	
	// -----------------------------------------------------------------------------------			

	function clickCloudIcon(){
		showLoader('true');
		loadJSON('settings', '', '5000', function (response) {
			jr = JSON.parse(response);
			byId('thermoname').innerHTML = jr.system.host;	
			if(jr.iot.CLon === true){
				window.location = "https://" + jr.iot.CLurl + "?api_token=" + jr.iot.CLtoken;
			}else{
			
			}
			showLoader('false');
		})
	}
	
	function getCloudIcon(online){
		switch(online) {
			case 0:
				return '';
			break;

			case 1:
				return '<span class="icon-cloud icon-red"> </span>';
			break;
			
			case 2:
				return '<span class="icon-cloud icon-green"> </span>';
			break;
			default:
				return '';
		} 
	}

	// -----------------------------------------------------------------------------------			

	function showLoader(show){
		if (show == 'true') {
			byId('cover').classList.add("cover_active");
			byId('spinner').classList.add("spinner");		
		}else{
			byId('cover').classList.remove("cover_active");
			byId('spinner').classList.remove("spinner");
		}
	}
	
	// -----------------------------------------------------------------------------------		

	var updateActivated = 'false';	
	function checkUpdateActivated(){
		loadJSON('updatestatus', '', '3000', function (response) {
			jr = JSON.parse(response);
			if (jr == true){
				showLoader('true');
			}else if (jr == false){
				showLoader('false')
				updateActivated = 'false';
				byClass("notification")[0].style.display = "none";
				location.reload(true);
			}
		})	
	}
	
	function update(){
		loadJSON('settings', '', '3000', function (response) {
			jr = JSON.parse(response);
			txt = 'Wollen Sie das aktuelle Update installieren?\n\nAktuelle Version:' + jr.system.version + '\nNeue Version:' + jr.system.getupdate;
			if (confirm(txt) == true) {
				//data = 'version=' + jr.system.getupdate;
				loadJSON('update', '', '60000', function (response) {
					showLoader('true');
					updateActivated = 'true';
				});
			}						
		})	
	}
	
	// -----------------------------------------------------------------------------------	

	function showSystem(){
		hideAll();
		showLoader('true');
		loadJSON('settings', '', '3000', function (response) {
			jr = JSON.parse(response);
			byId('language').value = jr.system.language;
			byId('hostname').value = jr.system.host;
			byId('apname').value = jr.system.ap;
			byId('thermoname').innerHTML = jr.system.host;
			byId('unit').value = jr.system.unit;
			byId('searchUpdate').checked = jr.system.autoupd;
			byId('prerelease').checked = jr.system.prerelease;
			clearOption('hwversion');
			for (var i = 0; i < jr.hardware.length; i++) {
				byId('hwversion').options[byId('hwversion').options.length] = new Option(jr.hardware[i], jr.hardware[i]);
			}
			byId('hwversion').value = jr.system.hwversion;
			byId('system_config').style.display = "inline";

			if(!jr.display.updname.startsWith("NX")) {
				byId('displayheader').style.display = "none";
				byId('displaybuttons').style.display = "none";
			}

			showLoader('false');
		})
	}
	
	function setSystem(){
		showLoader('true');
		loadJSON('settings', '', '3000', function (response) {
			jr = JSON.parse(response);
			jr.system.host = byId('hostname').value.replace(/ /g, '_');
			jr.system.ap = byId('apname').value.replace(/ /g, '_');
			jr.system.hwversion = byId('hwversion').value;
			jr.system.language = byId('language').value;
			jr.system.unit = byId('unit').value;		
			jr.system.autoupd = byId('searchUpdate').checked;	
			jr.system.prerelease = byId('prerelease').checked;			
			loadTranslation(jr.system.language);
			var data = JSON.stringify(jr.system);
			showLoader('true');
			loadJSON('setsystem', data, '60000', function (response) {
				byId('thermoname').innerHTML = jr.system.host;
				showIndex();
				showLoader('false');
			})			
		})	
	}
	// -----------------------------------------------------------------------------------
	
	function showPitmaster(){	
		hideAll();
		document.getElementById('pitmaster_id0').style.display = "none";
		document.getElementById('pitmaster_id1').style.display = "none";
		showLoader('true');
		loadJSON('data', '', '3000', function (response) {
			jr = JSON.parse(response);
			for (var pitID = 0; pitID < jr.pitmaster.pm.length; pitID++) {
				clearOption('pitmaster_typ' + pitID.toString());
				for (var j = 0; j < jr.pitmaster.type.length; j++) {
						byId('pitmaster_typ' + pitID.toString()).options[byId('pitmaster_typ' + pitID.toString()).options.length] = new Option(jr.pitmaster.type[j], jr.pitmaster.type[j]);
				}
				byId('pitmaster_typ' + pitID.toString()).value = jr.pitmaster.pm[pitID].typ;
				clearOption('pitmaster_channel' + pitID.toString());
				for (var i = 0; i < jr.channel.length; i++) {
						byId('pitmaster_channel' + pitID.toString()).options[byId('pitmaster_channel' + pitID.toString()).options.length] = new Option('#' + jr.channel[i].number + ' - ' + jr.channel[i].name, jr.channel[i].number);
				}
				byId('pitmaster_channel' + pitID.toString()).value = jr.pitmaster.pm[pitID].channel;
				byId('pitmaster_set' + pitID.toString()).value = jr.pitmaster.pm[pitID].set;
				byId('pitmaster_value' + pitID.toString()).value = jr.pitmaster.pm[pitID].value;
				byId('pitmaster_settings').style.display = "inline";
				showPitmasterProfile(pitID, jr.pitmaster.pm[pitID].pid);
				changePitmasterTyp(pitID);
				changeActuatorTyp();
				document.getElementById('pitmaster_id' + pitID.toString()).style.display = "block";
			}
			showLoader('false');
		})
	}
	
	function changePitmasterTyp(id){		
		switch(byId('pitmaster_typ' + id.toString()).value) {
			case 'off':
				byId('pitmaster_value_show' + id.toString()).style.display = "none";
				byId('pitmaster_channel_show' + id.toString()).style.display = "none";
				byId('pitmaster_set_show' + id.toString()).style.display = "none";
				byId('pitmaster_profile_show' + id.toString()).style.display = "none";
				break;
			case 'manual':
				byId('pitmaster_value_show' + id.toString()).style.display = "inline";	
				byId('pitmaster_channel_show' + id.toString()).style.display = "none";
				byId('pitmaster_set_show' + id.toString()).style.display = "none";
				byId('pitmaster_profile_show' + id.toString()).style.display = "inline";
				break;
			case 'auto':
				byId('pitmaster_profile_show' + id.toString()).style.display = "inline";
				byId('pitmaster_value_show' + id.toString()).style.display = "none";
				byId('pitmaster_channel_show' + id.toString()).style.display = "inline";
				byId('pitmaster_set_show' + id.toString()).style.display = "inline";			
				break;
			default:
				byId('pitmaster_profile_show' + id.toString()).style.display = "inline";
				byId('pitmaster_value_show' + id.toString()).style.display = "inline";
				byId('pitmaster_channel_show' + id.toString()).style.display = "inline";
				byId('pitmaster_set_show' + id.toString()).style.display = "inline";
		} 		
	}

	function changeProfilShow(id){		
		switch(byId('pitmaster_typ' + id.toString()).value) {
			case 'off':
				byId('pid_settings_show').style.display = "none";
				byId('advanced_settings_show').style.display = "none";
				break;
			case 'manual':
				byId('pid_settings_show').style.display = "none";
				byId('advanced_settings_show').style.display = "none";
				break;
			case 'auto':
				byId('pid_settings_show').style.display = "inline";
				byId('advanced_settings_show').style.display = "inline";
				break;
			default:
				byId('pid_settings_show').style.display = "inline";
				byId('advanced_settings_show').style.display = "inline";
		} 		
	}

	function changeActuatorTyp(){		
		switch(byId('pitmaster_profile_aktor').value) {
			case '3':
				byId('pid_dcvalue_show').style.display = "inline";
				byId('pid_spvalue_show').style.display = "inline";
				byId('pid_link_show').style.display = "inline";
				break;
			case '2':
				byId('pid_dcvalue_show').style.display = "none";
				byId('pid_spvalue_show').style.display = "inline";
				byId('pid_link_show').style.display = "none";
				break;
			default:
				byId('pid_dcvalue_show').style.display = "inline";
				byId('pid_spvalue_show').style.display = "none";
				byId('pid_link_show').style.display = "none";
		} 		
	}
	
	function setPitmaster(){
		showLoader('true');
		loadJSON('data', '', '3000', function (response) {
			jr = JSON.parse(response);
			for (var id = 0; id < jr.pitmaster.pm.length; id++){
				jr.pitmaster.pm[id].id = id;
				jr.pitmaster.pm[id].typ = byId('pitmaster_typ' + id.toString()).value;
				jr.pitmaster.pm[id].channel = byId('pitmaster_channel' + id.toString()).value;
				jr.pitmaster.pm[id].set = byId('pitmaster_set' + id.toString()).value;
				jr.pitmaster.pm[id].value = byId('pitmaster_value' + id.toString()).value
				jr.pitmaster.pm[id].pid = byId('pid_profile' + id.toString()).value
			}
			var data = JSON.stringify(jr.pitmaster.pm);
			loadJSON('setpitmaster', data, '60000', function (response) {
				showIndex();
				showLoader('false');
			})	
		})
		showLoader('false');		
	}
	
	function showPitmasterProfileSettings(profile){
		showLoader('true');
		loadJSON('settings', '', '3000', function (response) {
		jr = JSON.parse(response);
		clearOption('pitmaster_profile_aktor');

		for (var i = 0; i < jr.aktor.length; i++) {
				byId('pitmaster_profile_aktor').options[byId('pitmaster_profile_aktor').options.length] = new Option(jr.aktor[i], i);
		}
		byId('pitmaster_profile_aktor').value = jr.pid[profile].aktor;
		byId('pid_name').value = jr.pid[profile].name;	
		byId('pid_Kp').value = jr.pid[profile].Kp;	
		byId('pid_Ki').value = jr.pid[profile].Ki;
		byId('pid_Kd').value = jr.pid[profile].Kd;
		byId('pid_DCmin').value = jr.pid[profile].DCmmin;
		byId('pid_DCmax').value = jr.pid[profile].DCmmax;
		byId('pid_opl').checked = jr.pid[profile].opl;
		byId('pid_auto').checked = jr.pid[profile].tune;
		byId('pid_jump').value = jr.pid[profile].jp;
		byId('pid_SPmin').value = jr.pid[profile].SPmin;
		byId('pid_SPmax').value = jr.pid[profile].SPmax;
		byId('pid_link').value = jr.pid[profile].link;
		showLoader('false');
		changeActuatorTyp();
		})
	}

	function showPitmasterProfile(id, profile){
		showLoader('true');
		loadJSON('settings', '', '3000', function (response) {
		jr = JSON.parse(response);
		var profileBackup = byId('pid_profile' + id.toString()).value;
		clearOption('pid_profile' + id.toString());
		for (var i = 0; i < jr.pid.length; i++) {
			byId('pid_profile' + id.toString()).options[byId('pid_profile' + id.toString()).options.length] = new Option(jr.pid[i].name, i);
		}

		if( typeof profile == 'undefined' ){
			profile = profileBackup;
		}
		byId('pid_profile' + id.toString()).value = profile;
		showLoader('false');
		})		
	}
	
	function togglePitmasterView(id){
		if( typeof togglePitmasterView.id == 'undefined' ){
        	togglePitmasterView.id = 0;
    	}

		if( typeof togglePitmasterView.profile == 'undefined' ){
        	togglePitmasterView.profile = 0;
    	}

		if( typeof id == 'undefined' ){
        	id = togglePitmasterView.id;
    	}else{
			togglePitmasterView.profile = byId('pid_profile' + id.toString()).value;
			togglePitmasterView.id = id;
		}

		if(byId('pitmaster_settings').style.display == "inline"){
			showPitmasterProfileSettings(byId('pid_profile' + id.toString()).value);
			showPitmasterProfile(id, byId('pid_profile' + id.toString()).value);
			changeProfilShow(id);
			byId('pitmaster_settings').style.display = "none";
			byId('pitmaster_profile').style.display = "inline";		
		}else{
			showPitmasterProfile(0);
			showPitmasterProfile(1);
			byId('pitmaster_settings').style.display = "inline";
			byId('pitmaster_profile').style.display = "none";	
		}
	}

	function backPidProfile(){
		togglePitmasterView();
	}
	
	function setPitmasterProfile(){
		loadJSON('settings', '', '3000', function (response) {
			jr = JSON.parse(response);
			profile = togglePitmasterView.profile;
			jr.pid[profile].aktor = byId('pitmaster_profile_aktor').value;
			jr.pid[profile].name = byId('pid_name').value;
			jr.pid[profile].Kp = byId('pid_Kp').value;
			jr.pid[profile].Ki = byId('pid_Ki').value;
			jr.pid[profile].Kd = byId('pid_Kd').value;
			jr.pid[profile].DCmmin = byId('pid_DCmin').value;
			jr.pid[profile].DCmmax = byId('pid_DCmax').value;
			jr.pid[profile].opl = byId('pid_opl').checked;
			jr.pid[profile].tune = byId('pid_auto').checked;
			jr.pid[profile].jp = byId('pid_jump').value;
			jr.pid[profile].SPmin = byId('pid_SPmin').value;
			jr.pid[profile].SPmax = byId('pid_SPmax').value;
			jr.pid[profile].link = byId('pid_link').value;
			var data = JSON.stringify(jr.pid);
			loadJSON('setpid', data, '60000', function (response) {
				togglePitmasterView();
			})	
		})
		showLoader('false');	
	}
	
	function setDC(dc){
		if(dc == '0'){
			var_val = byId('pid_DCmin').value;
		}else{
			var_val = byId('pid_DCmax').value;
		}
		txt = 'Soll der Pitmasterausgang für 10 Sekunden mit dem angegebenen Wert angesteuert werden?';
		if (confirm(txt) == true) {
			data = '{"aktor":' + byId('pitmaster_profile_aktor').value + ',"dc":' + dc + ',"val":' + var_val*10 + '}';
			loadJSON('setDC', data, '60000', function (response) {
				showLoader('true');
				dcActivated = 'true';
			})	
		}		
	}
	
	// -----------------------------------------------------------------------------------

	function showIndex(){
		hideAll();
		byId('index').style.display = "inline";
	}
	
	function showAbout(){
		hideAll();
		byId('about').style.display = "inline";
	}	

	function hideAll(){
		hideIDs = ['index','wlan_config','system_config','system_config','history','about','wlan_set','thingspeak','push_notification','channel_settings','pitmaster_settings','pitmaster_profile','extended_settings'];
		for (var i = 0; i < hideIDs.length; i++) {
			byId(hideIDs[i]).style.display = "none";
		}
		pk.close();
	}
	
	// -----------------------------------------------------------------------------------	
	
	function setgodmode(gnum){
		txt = 'Änderungen durchführen?';
		if (confirm(txt) == true) {
			data = '{"god":' + gnum + '}';
			loadJSON('god', data, '60000', function (response) {})
        }
	}
	
	// -----------------------------------------------------------------------------------	
    function loadJSON(url, data, timeout, callback) {
        var xobj = new XMLHttpRequest();
        xobj.overrideMimeType("application/json");
        xobj.open('POST', url, true);
		if (url.indexOf("api.wlanthermo.com") != -1) {
		   xobj.setRequestHeader("Content-Type", "application/x-www-form-urlencoded; charset=UTF-8");
		} else {
		   xobj.setRequestHeader("Content-Type", "application/json");
		}
		xobj.timeout = timeout;
        xobj.onreadystatechange = function () {
            if (xobj.readyState == 4 && xobj.status == "200") {
                callback(xobj.responseText);
            }
        }
		xobj.ontimeout = function (e) {
			if (updateActivated != 'true'){
				showLoader('false');
			}
		};
        xobj.send(data);
    }
	
	// -----------------------------------------------------------------------------------	
	
	var showBatteryWlanIcon = true;
	function setshowBatteryWlanIcon(){
		showBatteryWlanIcon = false;
		readTemp();
		setTimeout(function(){
			showBatteryWlanIcon = true;
        }, 10000);
	}
	
	function getBatteryIcon(percent,charge){
		data = '';
		if (showBatteryWlanIcon == true){
			if(charge == true){
				data = '<span class="icon-power-cord"> </span>';
			<!-- }else{ -->
				<!-- data = ''; -->
			}
			if (percent >= '90'){
				data = data + getIcon('battery-100');
			}else if (percent >= '75'){
				data = data + getIcon('battery-75');
			}else if (percent >= '50'){
				data = data + getIcon('battery-50');
			}else if (percent >= '15'){
				data = data + getIcon('battery-25');
			}else if (percent >= '10'){
				data = data + getIcon('battery-0 icon-red');
			}else{
				data = data + getIcon('battery-0 icon-red icon-blinker');
			}
			return data + '&nbsp;';
		}else{
			if(charge == true){
				data = getIcon('power-cord');
			}else{
				data = '';
			}
			data = data + percent + '%';
			return data + '&nbsp;';
		}
	}
	
	// -----------------------------------------------------------------------------------		
	// Initialized Channels
	// -----------------------------------------------------------------------------------
	
	var channel_init = false;
	var channel_count = false;
	
	function addChannel(number){
		if(debug === true){console.log('function addChannel number:' + number);}
		for (i = 0; i < number; i++) {		
			var parent = document.getElementById("channel_template");
			NodeList.prototype.forEach = Array.prototype.forEach;
			var children = parent.childNodes;
			children.forEach(function(item){
				var cln = item.cloneNode(true);
				document.getElementById("index_content").appendChild(cln);
			});
			document.getElementById("index_content").lastElementChild.classList.add("temp_index");
			document.getElementById("index_content").lastElementChild.setAttribute('data-channel', i);
		}
		channel_init = true;
		if(debug === true){console.log('channel_init:' + channel_init );}
		channel_count = number;
		if(debug === true){console.log('channel_count:' + number );}
	}

	<!-- function removeChannel(number){ -->
		<!-- for (i = 0; i < number; i++) { -->
			<!-- $(".channel_index").children().last().remove(); -->
		<!-- } -->
	<!-- } -->
	
	// read temp values
	// -----------------------------------------------------------------------------------	
	
	function readTemp(){
		if (updateActivated == 'true'){
				checkUpdateActivated();
		}else if (dcActivated == 'true') {
				checkDCActivated();
		}else{
			loadJSON('data', '', '3000', function (response) {
				jr = JSON.parse(response);
				
				if(channel_init === false){addChannel(jr.channel.length);}
				
				if (typeof jr.system.soc != "undefined") {
					BatteryIcon = getBatteryIcon(jr.system.soc,jr.system.charge);
					byClass("battery")[0].innerHTML = BatteryIcon;
				}
				byClass("cloud")[0].innerHTML = getCloudIcon(jr.system.online);
				RSSIIcon = getRSSIIcon(jr.system.rssi);
				byClass("wifi")[0].innerHTML = RSSIIcon;
				var x = byClass("pure-u-1-1 pure-u-md-1-2 pure-u-xl-1-4 temp_index");
				var i;
				var pitID = 0;
				var ch_count = 0;

				for (i = 0; i < x.length; i++) {
					x[i].getElementsByClassName('1-box channel')[0].style.borderColor = jr.channel[i].color;					
					x[i].getElementsByClassName('chtitle')[0].innerHTML = jr.channel[i].name;

					for(pitID = 0; pitID < jr.pitmaster.pm.length; pitID++){
						if(jr.pitmaster.pm[pitID].channel == jr.channel[i].number)
							break;
					}

					if(pitID < jr.pitmaster.pm.length){
						if (jr.pitmaster.pm[pitID].typ == 'auto'){
							var a = getIcon('uniF2C7') + jr.pitmaster.pm[pitID].set + '°' + ' / ';
							var e = ' ' + jr.pitmaster.pm[pitID].value + '%';
							if(jr.pitmaster.pm[pitID].value == '0'){
								x[i].getElementsByClassName('chtitle')[0].innerHTML = a + getIcon('fan') + ' ' + jr.pitmaster.pm[pitID].value + '%';
							}else if (jr.pitmaster.pm[pitID].value <= '25'){
								x[i].getElementsByClassName('chtitle')[0].innerHTML = a + getIcon('fan icon-rotate-25') + e;
							}else if (jr.pitmaster.pm[pitID].value <= '50'){
								x[i].getElementsByClassName('chtitle')[0].innerHTML = a + getIcon('fan icon-rotate-50') + e;
							}else if (jr.pitmaster.pm[pitID].value <= '75'){
								x[i].getElementsByClassName('chtitle')[0].innerHTML = a + getIcon('fan icon-rotate-75') + e;
							}else if (jr.pitmaster.pm[pitID].value <= '100'){
								x[i].getElementsByClassName('chtitle')[0].innerHTML = a + getIcon('fan icon-rotate-100') + e;
							}
						}else{
							x[i].getElementsByClassName('chtitle')[0].innerHTML = jr.channel[i].name;
						}
					}else{
						x[i].getElementsByClassName('chtitle')[0].innerHTML = jr.channel[i].name;
					}
					x[i].getElementsByClassName('chnumber')[0].innerHTML = "#" + jr.channel[i].number;
					x[i].getElementsByClassName('tempmin')[0].innerHTML = getIcon('temp_down') + jr.channel[i].min + "°";
					x[i].getElementsByClassName('tempmax')[0].innerHTML = getIcon('temp_up') + jr.channel[i].max + "°";
					if (jr.channel[i].temp == '999'){
						x[i].style.display = 'none';
						x[i].getElementsByClassName('temp')[0].innerHTML = 'OFF';
						x[i].getElementsByClassName('temp')[0].style.color = "#FFFFFF";		
						x[i].getElementsByClassName('temp')[0].style.fontWeight = 'normal';
					}else{
						ch_count++;
						x[i].style.display = 'inline';
						x[i].getElementsByClassName('temp')[0].innerHTML = jr.channel[i].temp.toFixed(1) + "°" + jr.system.unit;
						if (jr.channel[i].temp < jr.channel[i].min){
							x[i].getElementsByClassName('temp')[0].style.color = "#1874cd";
							x[i].getElementsByClassName('temp')[0].style.fontWeight = 'bold';
						}else if (jr.channel[i].temp > jr.channel[i].max){
							x[i].getElementsByClassName('temp')[0].style.color = "red";
							x[i].getElementsByClassName('temp')[0].style.fontWeight = 'bold';
						}else{
							x[i].getElementsByClassName('temp')[0].style.color = "#FFFFFF";
							x[i].getElementsByClassName('temp')[0].style.fontWeight = 'normal';
						}
					}
				}
				if (ch_count == 0){
					for (i = 0; i < x.length; i++) {
						x[i].style.display = 'inline';
					}
				}
			})
		}
	}

	// Wifi connection
	// -----------------------------------------------------------------------------------

	function showSetWLAN(){
		hideAll();
		byId('wlan_set').style.display = "inline";
	}
	
	function setWLAN(ssid, passwd){
		showLoader('true');
		var data='{"ssid":"' + ssid + '","password":"' + passwd + '"}';
		loadJSON('setnetwork', data, '60000', function (response) {
			showWLAN();
			showLoader('false');
		})
		
	}	
	
	function networkscan(){
		loadJSON('networkscan', '', '3000', function (response) {
			byId('networkrefresh').innerHTML = '<h3><span class="icon-refresh icon-rotate-50" onclick="networkscan();"></span></h3>'
			if (response == "OK"){
				setTimeout("networklist();", 3000);
			}
		})
	}
	
	function networklist(){
		loadJSON('networklist', '', '3000', function (response) {
			try {
				jr = JSON.parse(response);
				jr.Scan.sort(function(a,b) {return b.RSSI - a.RSSI;});		
				byId('networklist').innerHTML = '';
				byId('networkconnect').innerHTML = '';
				var table_networklist = byId('networklist');
				var table_networkconnect = byId('networkconnect');
				if (jr.Connect){			
					byId('hr_wifi').style.display = "";
					var row = table_networkconnect.insertRow(0);
					addCell(row,getIcon('ok'),'row-Check','0');
					addCell(row,jr.SSID + " (" + jr.BSSID + ")",'row-SSID','1');
					addCell(row,getRSSIIcon(jr.RSSI),'row-RSSI','2');
					addCell(row,getWifiSecureIcon(jr.Enc),'row-Enc','3');
					addCell(row,'','row-link','4');
				}else{
					byId('hr_wifi').style.display = "none";
				}
				NetworkconnectRowClick();
				for (var i = 0; i < jr.Scan.length; i++) {
					var row = table_networklist.insertRow(-1);
					addCell(row,'','row-Check','0');
					addCell(row,jr.Scan[i].SSID,'row-SSID','1');
					addCell(row,getRSSIIcon(jr.Scan[i].RSSI),'row-RSSI','2');
					addCell(row,getWifiSecureIcon(jr.Scan[i].Enc),'row-Enc','3');
					addCell(row,getIcon('circle-right'),'row-link','4');
				}
				
				//console.log(jr.Scan);
				byId('networkrefresh').innerHTML = '<h3><span class="icon-refresh" onclick="networkscan();"></span></h3>'
				NetworklistRowClick();

			} catch(e) {
				// error in the above string (in this case, yes)!
				//alert(e);
			}
		})
	}
	
	function getUnique(arr, comp) {
	  const unique = arr
		   .map(e => e[comp])

		 // store the keys of the unique objects
		.map((e, i, final) => final.indexOf(e) === i && i)

		// eliminate the dead keys & store unique objects
		.filter(e => arr[e]).map(e => arr[e]);

	   return unique;
	}

	var ssidInput;
	function NetworklistRowClick() {
		var table = document.getElementById("networklist");
		var rows = table.rows; // or table.getElementsByTagName("tr");
		for (var i = 0; i < rows.length; i++) {
			rows[i].onclick = (function() { // closure
				var cnt = i; // save the counter to use in the function
				return function() {
					document.getElementsByName('ssidInput')[0].value = this.cells[1].innerHTML;
					document.getElementsByName('ssidPasswordInput')[0].value = null;
					ssidInput = this.cells[1].innerHTML;
					showSetWLAN();
				}    
			})(i);
		}
	}
	 
	function setssidInput(){
		document.getElementsByName('ssidInput')[0].value = ssidInput;
	}
	
	function NetworkconnectRowClick() {
		var table = byId('networkconnect');
		var rows = table.rows; // or table.getElementsByTagName("tr");
		for (var i = 0; i < rows.length; i++) {
			rows[i].onclick = (function() { // closure
				var cnt = i; // save the counter to use in the function
				return function() {
				}    
			})(i);
		}
	}	
	
	function getRSSIIcon(dbm){
		data = '';
		if (showBatteryWlanIcon == true){
			if(dbm >= '-80'){
				data = data + getIcon('Wlan100');
			}else if (dbm >= '-95'){
				data = data + getIcon('Wlan66');
			}else if (dbm >= '-105'){
				data = data + getIcon('Wlan33');
			}
			return data;	
		}else{
			data = dbm + 'dBm';
			return data;		
		}
	}

	function getWifiSecureIcon(data){
		var lock = getIcon('lock');
		var unlock = getIcon('unlock');
		switch(data) {
			case 2: //ENC_TYPE_TKIP - WPA / PSK
				return lock;
				break;
			case 4: //ENC_TYPE_CCMP - WPA2 / PSK
				return lock;
				break;
			case 5: //ENC_TYPE_WEP - WEP
				return lock;
				break;
			case 7: //ENC_TYPE_NONE - open network
				return unlock;
			break;
			case 8:	//ENC_TYPE_AUTO - WPA / WPA2 / PSK
				return lock;
				break;	
			default:
				return lock;
		} 
	}
	
	var dcActivated = 'false';
	function checkDCActivated(){
		loadJSON('dcstatus', '', '3000', function (response) {
			jr = JSON.parse(response);
			if (jr == true){
				showLoader('true');
			}else if (jr == false){
				showLoader('false')
				dcActivated = 'false';
			}
		})	
	}
	// -----------------------------------------------------------------------------------

	function addCell(row,cellinnerHtml,cellClass,nr){
		var cell = row.insertCell(nr);
		cell.innerHTML = cellinnerHtml;
		if(cellClass != ''){
			cell.className = cellClass;
		}
	}

	// -----------------------------------------------------------------------------------	
	function validateNumber(number,decimal) {
		//val = number.value.replace(/[^0-9.,]/g,'').replace(/[,]/g, '.');
		val = number.value.replace(/[^0-9\-.,]+\-/g,'').replace(/[,]/g, '.');  
		switch(decimal) {
			case '1': 
				if(val){val = val.toString().match(/^-?\d+(?:\.\d{0,1})?/)[0];}
				break;
			case '2': 
				if(val){val = val.toString().match(/^-?\d+(?:\.\d{0,2})?/)[0];}
				break;
			case '3':
				if(val){val = val.toString().match(/^-?\d+(?:\.\d{0,3})?/)[0];}
				break;
			case '4':
				if(val){val = val.toString().match(/^-?\d+(?:\.\d{0,4})?/)[0];}
				break;
			default:
				if(val){val = val.toString().match(/^-?\d+(?:\.\d{0,1})?/)[0];}
		} 
		if(val.split('.').length>2){val = val.replace(/\.+$/,"");}		
		number.value = val;
	}	

	// reboot device
	// -----------------------------------------------------------------------------------
	
	function restart(){
		txt = 'Nano neu starten?';
		if (confirm(txt) == true) {
			loadJSON('restart', '', '60000', function (response) {});
        }
	}

	function rotate(){
		txt = 'Neustarten, um das Display zu drehen?';
		if (confirm(txt) == true) {
			showLoader('true');
			loadJSON('rotate', '', '60000', function (response) {});
			setTimeout(function(){ updateActivated = 'true'; }, 5000);
        }
	}

	function calibrate(){
		loadJSON('calibrate', '', '60000', function (response) {});
	}
	
	// show hidden Menu 
	// -----------------------------------------------------------------------------------	
	
	function showExtendedSettings(){
		hideAll();
		byId('extended_settings').style.display = "inline";
	}	
	
	var clickTimer = null;
	function touchStart() {
		if (clickTimer == null) {
			clickTimer = setTimeout(function () {
				clickTimer = null;
			}, 500)
		} else {
			clearTimeout(clickTimer);
			clickTimer = null;
			showExtendedSettings();
		}
	}	
	// translation function 
	// -----------------------------------------------------------------------------------	
	function loadTranslation(language){
		var translate = new Translate();
		var currentLng = language;//'fr'
		var attributeName = 'data-tag';
		translate.init(attributeName, currentLng);
		translate.process(); 
	}
	function Translate() { 
		//initialization
		this.init =  function(attribute, lng){
			console.log("Sprache:" + lng);
			this.attribute = attribute;
			this.lng = lng;    
		}
		//translate 
		this.process = function(){		
			_self = this;
			var LngObject = window[this.lng];
			console.log(LngObject["name1"]);
			var allDom = document.getElementsByTagName("*");
			for(var i =0; i < allDom.length; i++){
				var elem = allDom[i];
				var key = elem.getAttribute(_self.attribute);    
                if(key != null) {
					console.log(key);
					elem.innerHTML = LngObject[key]  ;
				}
			}
		}    
	}	
	// -----------------------------------------------------------------------------------	
	
	function setHelpBox(title,v){	
		byId('helpBoxTitle').innerHTML = title;
		document.getElementById("helpBoxObject").innerHTML = v;
		byId('helpBox').style.display= 'block';
	}
	readTemp();
	/* eslint no-extend-native: 0 */

	(function () {
	  // Defining locale
	  Date.shortMonths = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
	  Date.longMonths = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']
	  Date.shortDays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']
	  Date.longDays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']
	  // Defining patterns
	  var replaceChars = {
		// Day
		d: function () { var d = this.getDate(); return (d < 10 ? '0' : '') + d },
		D: function () { return Date.shortDays[this.getDay()] },
		j: function () { return this.getDate() },
		l: function () { return Date.longDays[this.getDay()] },
		N: function () { var N = this.getDay(); return (N === 0 ? 7 : N) },
		S: function () { var S = this.getDate(); return (S % 10 === 1 && S !== 11 ? 'st' : (S % 10 === 2 && S !== 12 ? 'nd' : (S % 10 === 3 && S !== 13 ? 'rd' : 'th'))) },
		w: function () { return this.getDay() },
		z: function () { var d = new Date(this.getFullYear(), 0, 1); return Math.ceil((this - d) / 86400000) },
		// Week
		W: function () {
		  var target = new Date(this.valueOf())
		  var dayNr = (this.getDay() + 6) % 7
		  target.setDate(target.getDate() - dayNr + 3)
		  var firstThursday = target.valueOf()
		  target.setMonth(0, 1)
		  if (target.getDay() !== 4) {
			target.setMonth(0, 1 + ((4 - target.getDay()) + 7) % 7)
		  }
		  var retVal = 1 + Math.ceil((firstThursday - target) / 604800000)

		  return (retVal < 10 ? '0' + retVal : retVal)
		},
		// Month
		F: function () { return Date.longMonths[this.getMonth()] },
		m: function () { var m = this.getMonth(); return (m < 9 ? '0' : '') + (m + 1) },
		M: function () { return Date.shortMonths[this.getMonth()] },
		n: function () { return this.getMonth() + 1 },
		t: function () {
		  var year = this.getFullYear()
		  var nextMonth = this.getMonth() + 1
		  if (nextMonth === 12) {
			year = year++
			nextMonth = 0
		  }
		  return new Date(year, nextMonth, 0).getDate()
		},
		// Year
		L: function () { var L = this.getFullYear(); return (L % 400 === 0 || (L % 100 !== 0 && L % 4 === 0)) },
		o: function () { var d = new Date(this.valueOf()); d.setDate(d.getDate() - ((this.getDay() + 6) % 7) + 3); return d.getFullYear() },
		Y: function () { return this.getFullYear() },
		y: function () { return ('' + this.getFullYear()).substr(2) },
		// Time
		a: function () { return this.getHours() < 12 ? 'am' : 'pm' },
		A: function () { return this.getHours() < 12 ? 'AM' : 'PM' },
		B: function () { return Math.floor((((this.getUTCHours() + 1) % 24) + this.getUTCMinutes() / 60 + this.getUTCSeconds() / 3600) * 1000 / 24) },
		g: function () { return this.getHours() % 12 || 12 },
		G: function () { return this.getHours() },
		h: function () { var h = this.getHours(); return ((h % 12 || 12) < 10 ? '0' : '') + (h % 12 || 12) },
		H: function () { var H = this.getHours(); return (H < 10 ? '0' : '') + H },
		i: function () { var i = this.getMinutes(); return (i < 10 ? '0' : '') + i },
		s: function () { var s = this.getSeconds(); return (s < 10 ? '0' : '') + s },
		v: function () { var v = this.getMilliseconds(); return (v < 10 ? '00' : (v < 100 ? '0' : '')) + v },
		// Timezone
		e: function () { return Intl.DateTimeFormat().resolvedOptions().timeZone },
		I: function () {
		  var DST = null
		  for (var i = 0; i < 12; ++i) {
			var d = new Date(this.getFullYear(), i, 1)
			var offset = d.getTimezoneOffset()

			if (DST === null) DST = offset
			else if (offset < DST) { DST = offset; break } else if (offset > DST) break
		  }
		  return (this.getTimezoneOffset() === DST) | 0
		},
		O: function () { var O = this.getTimezoneOffset(); return (-O < 0 ? '-' : '+') + (Math.abs(O / 60) < 10 ? '0' : '') + Math.floor(Math.abs(O / 60)) + (Math.abs(O % 60) === 0 ? '00' : ((Math.abs(O % 60) < 10 ? '0' : '')) + (Math.abs(O % 60))) },
		P: function () { var P = this.getTimezoneOffset(); return (-P < 0 ? '-' : '+') + (Math.abs(P / 60) < 10 ? '0' : '') + Math.floor(Math.abs(P / 60)) + ':' + (Math.abs(P % 60) === 0 ? '00' : ((Math.abs(P % 60) < 10 ? '0' : '')) + (Math.abs(P % 60))) },
		T: function () { var tz = this.toLocaleTimeString(navigator.language, {timeZoneName: 'short'}).split(' '); return tz[tz.length - 1] },
		Z: function () { return -this.getTimezoneOffset() * 60 },
		// Full Date/Time
		c: function () { return this.format('Y-m-d\\TH:i:sP') },
		r: function () { return this.toString() },
		U: function () { return Math.floor(this.getTime() / 1000) }
	  }

	  // Simulates PHP's date function
	  Date.prototype.format = function (format) {
		var date = this
		return format.replace(/(\\?)(.)/g, function (_, esc, chr) {
		  return (esc === '' && replaceChars[chr]) ? replaceChars[chr].call(date) : chr
		})
	  }
	}).call(this)	
	
window.addEventListener("load", function () {
    pk = new Piklor(".color-picker", [
			  "#FFFF00"
			, "#FFC002"
			, "#00FF00"
			, "#FFFFFF"
			, "#FF1DC4"
			, "#E46C0A"
			, "#C3D69B"
			, "#0FE6F1"
			, "#0000FF"
			, "#03A923"
			, "#C84B32"
			, "#FF9B69"
			, "#5082BE"
			, "#FFB1D0"
			, "#A6EF03"
			, "#D42A6B"
			, "#FFDA8F"
			, "#00B0F0"
			, "#948A54"
        ], {
            open: ".picker-wrapper .btn"
        })
      //, wrapperEl = pk.getElm(".picker-wrapper")
      //, border = pk.getElm("color_border")
      //, footer = pk.getElm("footer")
      ;

    pk.colorChosen(function (col) {
        //wrapperEl.style.backgroundColor = col;
		//byId("btn-color-picker").style.backgroundColor = col;
		byId('btn-color-picker').style.color = col;
		var x = document.getElementsByClassName("color_border");
		var i;
		for (i = 0; i < x.length; i++) {
		  x[i].style.borderColor = col;
		} 
		byId('btn-color-picker').setAttribute('data-color', col);

    });
});


</script>

</body>
</html>
